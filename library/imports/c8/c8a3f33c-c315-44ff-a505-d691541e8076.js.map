{"version":3,"sources":["..\\..\\..\\..\\assets\\runtime/assets\\runtime\\autoRun.js"],"names":["cc","Class","extends","Component","properties","querySetIntervalID","genRandomRewardSetIntervalID","genUpgradeReward","newGrowthLevel","date","Date","year","getFullYear","month","getMonth","dat","getDate","hour","getHours","minute","getMinutes","second","getSeconds","timeStr","serverAddr","GlobalData","rewardLevel","$","ajax","url","type","dataType","json","data","userID","genTime","rewardCategoryID","success","res","console","log","upgradeRewardCoin","rewardCoin","upgradeRewardItemID","rewardItemID","upgradeRewardItemCateID","rewardItemCateID","flagUpgradeReward","queryAttribute","instance","coin","title","serveAddr","lastLoginTime","contLoginDays","species","name","gender","color","hunger","hungerCeiling","cleaness","cleanessCeiling","thirst","thirstCeiling","mood","moodCeiling","energy","energyCeiling","growth","growthLevel","flagAgeGroup","flagSkipping","flagStory","flagSleep","sleepRemainTime","flagWork","workRemainTime","flagTrip","tripRemainTime","flagBgMusic","bgMusicVolume","bgMusicNum","bgPicNum","flagSound","soundVolume","flagNotice","flagLocation","flagVibration","bag","itemIDArrayStr","itemIDArray","itemNameArrayStr","itemNameArray","categoryIDArrayStr","categoryIDArray","categoryNameArrayStr","categoryNameArray","numberArrayStr","numberArray","categoryArray","flagEnableArrayStr","flagEnableArray","genRandomReward","luckyNum","number","Math","floor","random","ceil","randomRewardItemID","randomRewardItemCateID","flagRandomReward","start","queryInterval","genRandomRewardInterval","setInterval","exit","clearInterval"],"mappings":"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","file":"autoRun.js","sourceRoot":"..\\..\\..\\..\\assets\\runtime","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        querySetIntervalID: 0,\r\n        genRandomRewardSetIntervalID: 0,\r\n    },\r\n\r\n    genUpgradeReward: function(newGrowthLevel){\r\n        let date = new Date();\r\n        let year = date.getFullYear(); //获取当前年份   \r\n        let month = date.getMonth() + 1; //获取当前月份   \r\n        let dat = date.getDate(); //获取当前日    \r\n        let hour = date.getHours(); //获取小时   \r\n        let minute = date.getMinutes(); //获取分钟   \r\n        let second = date.getSeconds(); //获取秒   \r\n        let timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\r\n        var serverAddr = GlobalData.serverAddr + \"php/genReward.php\";\r\n        var rewardLevel = newGrowthLevel;\r\n        $.ajax({\r\n            url: serverAddr,\r\n            type: 'POST',\r\n            dataType: json,\r\n            data: {\r\n                userID: GlobalData.userID,\r\n                genTime: timeStr,\r\n                rewardCategoryID: 3,\r\n                rewardLevel: rewardLevel,\r\n            },\r\n            success(res) {\r\n                console.log(res);\r\n                GlobalData.upgradeRewardCoin = res.rewardCoin;//奖励金币数\r\n                GlobalData.upgradeRewardItemID = res.rewardItemID;//奖励物品编号\r\n                GlobalData.upgradeRewardItemCateID = res.rewardItemCateID;//奖励物品类别编号\r\n                GlobalData.flagUpgradeReward = true;\r\n            },\r\n        });\r\n    },\r\n\r\n    queryAttribute: function (){\r\n        var instance = this;\r\n        var serverAddr = GlobalData.serverAddr + \"php/queryUserAttribute.php\";\r\n        $.ajax({\r\n            url: serverAddr,\r\n            type: 'POST',\r\n            dataType: json,\r\n            data: {\r\n                userID: GlobalData.userID\r\n            },\r\n            success(res) {\r\n                console.log(res);\r\n                GlobalData.coin = res.coin;//金币值\r\n                GlobalData.title = res.title;//主人称呼\r\n            },\r\n        });\r\n        serverAddr = GlobalData.serverAddr + \"php/queryPetAttribute.php\";\r\n        $.ajax({\r\n            url: serveAddr,\r\n            type: 'POST',\r\n            dataType: json,\r\n            data: {\r\n                userID: GlobalData.userID\r\n            },\r\n            success(res) {\r\n                console.log(res);\r\n                GlobalData.lastLoginTime = res.lastLoginTime;//上一次登录时间\r\n                GlobalData.contLoginDays = res.contLoginDays; //连续登录天数\r\n                GlobalData.species = res.species;// 宠物种类\r\n                GlobalData.name = res.name;// 宠物名字\r\n                GlobalData.gender = res.gender;//  宠物性别\r\n                GlobalData.color = res.color;// 宠物毛色\r\n                GlobalData.hunger = res.hunger;// 宠物饥饿值\r\n                GlobalData.hungerCeiling = res.hungerCeiling;// 宠物饥饿值上限\r\n                GlobalData.cleaness = res.cleaness;// 宠物清洁值\r\n                GlobalData.cleanessCeiling = res.cleanessCeiling;// 宠物清洁值上限\r\n                GlobalData.thirst = res.thirst;// 宠物口渴值\r\n                GlobalData.thirstCeiling = res.thirstCeiling;// 宠物口渴值上限\r\n                GlobalData.mood = res.mood;// 宠物心情值\r\n                GlobalData.moodCeiling = res.moodCeiling;// 宠物心情值上限\r\n                GlobalData.energy = res.energy;// 宠物能量值\r\n                GlobalData.energyCeiling = res.energyCeiling;// 宠物能量值上限\r\n                GlobalData.growth = res.growth;// 宠物成长值\r\n                if(GlobalData.growthLevel != res.growthLevel){   //宠物等级发生改变，说明该升级了\r\n                    instance.genUpgradeReward(GlobalData.growthLevel);\r\n                }\r\n                GlobalData.growthLevel = res.growthLevel;// 宠物成长等级\r\n                GlobalData.flagAgeGroup = res.flagAgeGroup;// 标志位：幼年or成年\r\n                GlobalData.flagSkipping = res.flagSkipping;//标志位_是否解锁“跳绳”操作\r\n                GlobalData.flagStory = res.flagStory;//标志位_是否解锁“讲故事”操作\r\n                GlobalData.flagSleep = res.flagSleep;//标志位-是否正在睡觉\r\n                GlobalData.sleepRemainTime = res.sleepRemainTime;//睡觉剩余时长\r\n                GlobalData.flagWork = res.flagWork;//标志位-是否正在打工\r\n                GlobalData.workRemainTime = res.workRemainTime;//打工剩余时长\r\n                GlobalData.flagTrip = res.flagTrip;//标志位-是否正在旅游\r\n                GlobalData.tripRemainTime = res.tripRemainTime;//旅游剩余时长\r\n            },\r\n        });\r\n        serverAddr = GlobalData.serverAddr + \"php/querySetting.php\";\r\n        $.ajax({\r\n            url: serveAddr,\r\n            type: 'POST',\r\n            dataType: json,\r\n            data: {\r\n                userID: GlobalData.userID\r\n            },\r\n            success(res) {\r\n                console.log(res);\r\n                GlobalData.flagBgMusic = res.flagBgMusic;//标志位_是否开启背景音乐\r\n                GlobalData.bgMusicVolume = res.bgMusicVolume;//背景音乐音量\r\n                GlobalData.bgMusicNum = res.bgMusicNum;//背景音乐曲目编号\r\n                GlobalData.bgPicNum = res.bgPicNum;//背景图片编号\r\n                GlobalData.flagSound = res.flagSound;//标志位_是否开启音效\r\n                GlobalData.soundVolume = res.soundVolume;//音效音量\r\n                GlobalData.flagNotice = res.flagNotice;//标志位_是否开启推送通知\r\n                GlobalData.flagLocation = res.flagLocation;//标志位_是否开启摄像头权限\r\n                GlobalData.flagVibration = res.flagVibration;//标志位_是否开启震动\r\n            },\r\n        });\r\n        serverAddr = GlobalData.serverAddr + \"php/queryBag.php\";\r\n        $.ajax({\r\n            url: serveAddr,\r\n            type: 'POST',\r\n            dataType: json,\r\n            data: {\r\n                userID: GlobalData.userID\r\n            },\r\n            success(res) {\r\n                console.log(res);\r\n                GlobalData.bag.itemIDArrayStr = res.itemIDArray;//物品ID数组\r\n                GlobalData.bag.itemNameArrayStr = res.itemNameArray;//物品名称数组（英文）\r\n                GlobalData.bag.categoryIDArrayStr = res.categoryIDArray;//物品类别ID数组\r\n                GlobalData.bag.categoryNameArrayStr = res.categoryNameArray;//物品类别名称数组\r\n                GlobalData.bag.numberArrayStr = res.numberArray;//物品数量数组\r\n            },\r\n        });\r\n        serverAddr = GlobalData.serverAddr + \"php/queryDecBag.php\";\r\n        $.ajax({\r\n            url: serveAddr,\r\n            type: 'POST',\r\n            dataType: json,\r\n            data: {\r\n                userID: GlobalData.userID\r\n            },\r\n            success(res) {\r\n                console.log(res);\r\n                GlobalData.bag.itemIDArrayStr = res.itemIDArray;//物品ID数组\r\n                GlobalData.bag.itemNameArrayStr = res.itemNameArray;//物品名称数组（英文）\r\n                GlobalData.bag.categoryIDArrayStr = res.categoryArray;//物品类别ID数组\r\n                GlobalData.bag.categoryNameArrayStr = res.categoryNameArray;//物品类别名称数组\r\n                GlobalData.bag.flagEnableArrayStr = res.flagEnableArray;//物品是否启用的标志位数组\r\n            },\r\n        });\r\n    },\r\n\r\n    genRandomReward: function(){\r\n        var luckyNum = 7;  \r\n        var number = Math.floor(Math.random() * 10);\r\n        //以十分之一的概率生成奖励\r\n        if (number == luckyNum){\r\n            let date = new Date();\r\n            let year = date.getFullYear(); //获取当前年份   \r\n            let month = date.getMonth() + 1; //获取当前月份   \r\n            let dat = date.getDate(); //获取当前日    \r\n            let hour = date.getHours(); //获取小时   \r\n            let minute = date.getMinutes(); //获取分钟   \r\n            let second = date.getSeconds(); //获取秒   \r\n            let timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\r\n            var serverAddr = GlobalData.serverAddr + \"php/genReward.php\";\r\n            var rewardLevel = Math.ceil(Math.random() * 20);\r\n            $.ajax({\r\n                url: serverAddr,\r\n                type: 'POST',\r\n                dataType: json,\r\n                data: {\r\n                    userID: GlobalData.userID,\r\n                    genTime: timeStr,\r\n                    rewardCategoryID: 4,\r\n                    rewardLevel: rewardLevel,\r\n                },\r\n                success(res) {\r\n                    console.log(res);\r\n                    GlobalData.randomRewardItemID = res.rewardItemID;//奖励物品编号\r\n                    GlobalData.randomRewardItemCateID = res.rewardItemCateID;//奖励物品类别编号\r\n                    GlobalData.flagRandomReward = true;\r\n                },\r\n            });\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n        var queryInterval = 1000;  //时间间隔为1s，每1秒刷新一次属性值\r\n        var genRandomRewardInterval = 180000;  //时间间隔为3分钟，每3分钟生成一次随机奖励\r\n        this.querySetIntervalID = setInterval(queryAttribute, queryInterval);\r\n        this.genRandomRewardSetIntervalID = setInterval(genRandomReward, genRandomRewardInterval);\r\n    },\r\n\r\n    exit (){\r\n        clearInterval(this.querySetIntervalID);\r\n        clearInterval(this.genRandomRewardSetIntervalID);\r\n    },\r\n\r\n    \r\n\r\n    // update (dt) {},\r\n});\r\n"]}
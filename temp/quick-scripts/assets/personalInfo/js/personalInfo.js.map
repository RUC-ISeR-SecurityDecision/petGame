{"version":3,"sources":["personalInfo.js"],"names":["cc","Class","extends","Component","properties","userProfile","Sprite","petProfile","levelLabel","Label","coinLabel","titleLabel","statusImg","statusLabel","expLabel","expBar","ProgressBar","hungerBar","thirstBar","cleanessBar","energyBar","moodBar","hungerLabel","thirstLabel","cleanessLabel","energyLabel","moodLabel","onLoad","data","self","serverAddr","HttpHelper","httpPost","res","console","log","progress","parseInt","hunger","hungerCeiling","string","cleaness","cleanessCeiling","thirst","thirstCeiling","energy","energyCeiling","mood","moodCeiling","growth","growthCeiling","growthLevel","flagSleep","flagWork","loader","loadRes","SpriteFrame","err","sp","spriteFrame","flagTrip","coin","title","onCloseBtnClick","director","loadScene","start"],"mappings":"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","file":"personalInfo.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\personalInfo\\js","sourcesContent":["// personal information page js\r\n// author: wang-c\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        userProfile: cc.Sprite,\r\n        petProfile: cc.Sprite,\r\n        levelLabel: cc.Label,\r\n        coinLabel: cc.Label,\r\n        titleLabel: cc.Label,\r\n        statusImg: cc.Sprite,\r\n        statusLabel: cc.Label,\r\n        expLabel: cc.Label,\r\n        expBar: cc.ProgressBar,\r\n        hungerBar: cc.ProgressBar,\r\n        thirstBar: cc.ProgressBar,\r\n        cleanessBar: cc.ProgressBar,\r\n        energyBar: cc.ProgressBar,\r\n        moodBar: cc.ProgressBar,\r\n        hungerLabel: cc.Label,\r\n        thirstLabel: cc.Label,\r\n        cleanessLabel: cc.Label,\r\n        energyLabel: cc.Label,\r\n        moodLabel: cc.Label\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        var data = {\r\n            \"userID\": \"nqEsLYOCtdRUkx4Ovn8bhDUmnBHB3DdEncp0z7ApU1\"\r\n        };\r\n        var self = this;\r\n        var serverAddr = 'https://www.llquruc.top/petGame/php/queryPetAttribute.php';\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                self.hungerBar.progress = parseInt(res.hunger) / parseInt(res.hungerCeiling);\r\n                self.hungerLabel.string = res.hunger + '/' + res.hungerCeiling;\r\n                self.cleanessBar.progress = parseInt(res.cleaness) / parseInt(res.cleanessCeiling);\r\n                self.cleanessLabel.string = res.cleaness + '/' + res.cleanessCeiling;\r\n                self.thirstBar.progress = parseInt(res.thirst) / parseInt(res.thirstCeiling);\r\n                self.thirstLabel.string = res.thirst + '/' + res.thirstCeiling;\r\n                self.energyBar.progress = parseInt(res.energy) / parseInt(res.energyCeiling);\r\n                self.energyLabel.string = res.energy + '/' + res.energyCeiling;\r\n                self.moodBar.progress = parseInt(res.mood) / parseInt(res.moodCeiling);\r\n                self.moodLabel.string = res.mood + '/' + res.moodCeiling;\r\n                \r\n                self.expLabel.string = res.growth + '/' + res.growthCeiling;// 宠物成长值\r\n                self.expBar.progress = parseInt(res.growth) / parseInt(res.growthCeiling);\r\n                self.levelLabel.string = \"LV.\" + res.growthLevel;// 宠物成长等级\r\n\r\n                if (res.flagSleep == 1) {\r\n                    self.statusLabel.string = \"睡觉中\";\r\n                } else if (res.flagWork == 1) {\r\n                    self.statusLabel.string = \"工作中\";\r\n                    cc.loader.loadRes(\"page_personalInfo/working\", cc.SpriteFrame, (err, sp) => {\r\n                        if (err) {\r\n                            console.log(err);\r\n                            return;\r\n                        }\r\n                        console.log(\"success\");\r\n                        if (self.statusImg) {\r\n                            self.statusImg.spriteFrame = sp;\r\n                        }\r\n                    });\r\n                } else if (res.flagTrip == 1) {\r\n                    self.statusLabel.string = \"旅游中\";\r\n                    cc.loader.loadRes(\"page_personalInfo/tripping\", cc.SpriteFrame, (err, sp) => {\r\n                        if (err) {\r\n                            console.log(err);\r\n                            return;\r\n                        }\r\n                        console.log(\"success\");\r\n                        if (self.statusImg) {\r\n                            self.statusImg.spriteFrame = sp;\r\n                        }\r\n                    });\r\n                } else if (parseInt(res.hunger) < 50 || parseInt(res.cleaness) < 50 || parseInt(res.thirst) < 50  || parseInt(res.energy) < 30) {\r\n                    self.statusLabel.string = \"不开心\";\r\n                    cc.loader.loadRes(\"page_personalInfo/hungryThirstyTiredDirty\", cc.SpriteFrame, (err, sp) => {\r\n                        if (err) {\r\n                            console.log(err);\r\n                            return;\r\n                        }\r\n                        console.log(\"success\");\r\n                        if (self.statusImg) {\r\n                            self.statusImg.spriteFrame = sp;\r\n                        }\r\n                    });\r\n                } else {\r\n                    self.statusLabel.string = \"开心\";\r\n                    cc.loader.loadRes(\"page_personalInfo/happy\", cc.SpriteFrame, (err, sp) => {\r\n                        if (err) {\r\n                            console.log(err);\r\n                            return;\r\n                        }\r\n                        console.log(\"success\");\r\n                        if (self.statusImg) {\r\n                            self.statusImg.spriteFrame = sp;\r\n                        }\r\n                    });\r\n                }\r\n                \r\n            }\r\n        });\r\n        var serverAddr = 'https://www.llquruc.top/petGame/php/queryUserAttribute.php';\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                self.coinLabel.string = res.coin;\r\n                self.titleLabel.string = res.title;\r\n            }\r\n        });\r\n    },\r\n\r\n    onCloseBtnClick: function() {\r\n        cc.director.loadScene('mainPage');\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}
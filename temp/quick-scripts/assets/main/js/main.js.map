{"version":3,"sources":["main.js"],"names":["GlobalData","require","BagItem","id","name","categoryID","categoryName","number","cc","Class","extends","Component","properties","btnSound","default","url","AudioClip","sleepSound","hiSound","theme","get","_theme","set","value","resPath","self","loader","loadRes","SpriteFrame","err","sp","console","log","background","spriteFrame","color","Color","fromHEX","statusLayout","status","children","i","length","element","getChildByName","Sprite","Node","profile","shop","tripBtn","Button","workBtn","homeBtn","sleepBtn","settingBtn","functionBtn","bag","bagContent","Layout","bagCloseBtn","bagItemArray","pet","petCtrl","_isFunctionShow","isBagShow","_isBagShow","closeBag","stopAllActions","openBag","sleepPrompt","isSleepSettingShow","_isSleepSettingShow","fout","fadeOut","runAction","s","scaleTo","easing","easeBackIn","end_func","callFunc","active","bind","seq","sequence","fin","fadeTo","scale","easeBackOut","workPrompt","isWorkSettingShow","_isWorkSettingShow","tripPrompt","isTripSettingShow","_isTripSettingShow","_isPlaySettingShow","_isClockShow","_isLoginRewardShow","_isContLoginRewardShow","_isRandomRewardShow","_isUpgradeRewardShow","timeIndex","placeIndex","workTypeIndex","workTypeID","workTimeID","tripLocID","tripTimeID","sleepTimeID","updateID","selectBagItemIndex","clockCanvas","Graphics","sleepTimeLabel","Label","questionPrompt","loadSound","onLoad","userID","init","species","raw","soundVolume","hiSoundID","audioEngine","play","start","loadBag","date","Date","year","getFullYear","month","getMonth","dat","getDate","hour","getHours","minute","getMinutes","second","getSeconds","timeStr","data","serverAddr","HttpHelper","httpPost","_data","itemIDArray","split","itemNameArray","categoryIDArray","categoryNameArray","numberArray","index","item","push","btnSoundID","node","destroyAllChildren","hide","moveTo","v2","picName","Prefab","prf","bagItem","instantiate","zIndex","getComponent","addChild","on","EventType","TOUCH_START","selectNode","copyNode","parent","opacity","pos","convertToWorldSpaceAR","position","convertToNodeSpaceAR","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","TOUCH_CANCEL","onTouchCancel","show","event","selectItemName","nodeP","touches","getTouches","oldPos","getStartLocation","newPos","getLocation","subPos","sub","x","y","minX","width","maxX","Math","abs","minY","height","maxY","nPos","getPosition","setPosition","petRect","Rect","pauseSystemEvents","useRect","intersects","flagPetOperBtnEnable","eat","shower","destroy","string","backEnd","resumeSystemEvents","back","genLoginReward","instance","res","loginRewardCoin","rewardCoin","loginRewardGrowth","rewardGrowth","genContLoginReward","contLoginDays","contLoginRewardCoin","contLoginRewardGrowth","autoUpdate","hunger","cleaness","thirst","mood","energy","growth","growthLevel","flagRandomReward","flagUpgradeReward","queryAttribute","bgPicNum","exit","clearInterval","onPlusBtnClicked","interactable","showFunction","actionSleepBtn","actionWorkBtn","actionTripBtn","actionSettingBtn","funcBtnEnd","actionPlusBtn","rotateBy","spawn","moveBy","fadeIn","coin","title","lastLoginTime","gender","hungerCeiling","cleanessCeiling","thirstCeiling","moodCeiling","energyCeiling","flagAgeGroup","flagSkipping","flagStory","flagSleep","sleepRemainTime","flagWork","workRemainTime","flagTrip","tripRemainTime","flagBgMusic","bgMusicVolume","bgMusicNum","flagSound","flagNotice","flagLocation","flagVibration","itemIDArrayStr","itemNameArrayStr","categoryIDArrayStr","categoryArray","categoryNameArrayStr","flagEnableArrayStr","flagEnableArray","onClickGetReward","rewardCategoryID","details","toString","rewardItemID","rewardItemCateID","upgradeRewardCoin","upgradeRewardItemID","upgradeRewardItemCateID","randomRewardItemID","randomRewardItemCateID","onClickEatBtn","onClickShowerBtn","onClickDrinkBtn","onClickPlayBtn","onClickSubPlayBtn","playID","startCountDown","operationName","QANum","picNum","onClickCloseBagBtn","onClickTripCloseBtn","onClickTripBtn","dropdownData","promptStr","onClickConfirmTrip","goTrip","selectIndex","counter","parseInt","moodChangedValue","energyChangedValue","coinChangedValue","growthChangedValue","callback","unschedule","tripEnd","circle","fill","arc","PI","stroke","schedule","onClickWorkCloseBtn","onClickWorkBtn","onClickConfirmWork","goWork","hungerChangedValue","cleanessChangedValue","thirstChangedValue","flagCAPTCHA","workEnd","onClickSleepCloseBtn","onClickSleepBtn","onClickConfirmSleep","goSleep","stop","sleepSoundID","sleepEnd","onClickHomeBtn","director","loadScene","onClickSettingBtn","onClickShopBtn","onClickUserInfoBtn"],"mappings":"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","file":"main.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\main\\js","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nlet GlobalData = require('globalData');\r\nfunction BagItem(id, name, categoryID, categoryName, number) {\r\n    this.id = id;\r\n    this.name = name;\r\n    this.categoryID = categoryID;\r\n    this.categoryName = categoryName;\r\n    this.number = number;\r\n};\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        //音效\r\n        btnSound: {//按键音\r\n            default: null,\r\n            url: cc.AudioClip\r\n        },\r\n        sleepSound: {//睡觉的声音\r\n            default: null,\r\n            url: cc.AudioClip\r\n        },\r\n        hiSound: {//打招呼的声音\r\n            default: null,\r\n            url: cc.AudioClip\r\n        },\r\n\r\n        theme: {\r\n            get() {\r\n                return this._theme;\r\n            },\r\n            set(value) {\r\n                if (value < 0) {\r\n                    value = 0;\r\n                }\r\n                if (value > 3) {\r\n                    value = 3\r\n                }\r\n                if (value != this._theme) {\r\n                    let resPath = \"bgPic/\" + (value + 1);\r\n                    let self = this;\r\n                    cc.loader.loadRes(resPath, cc.SpriteFrame, (err, sp) => {\r\n                        if (err) {\r\n                            console.log('failed to load sprite ' + resPath);\r\n                        } else {\r\n                            self.background.spriteFrame = sp;\r\n                        }\r\n                    });\r\n                    let color = new cc.Color();\r\n                    if (value == 0) {\r\n                        color.fromHEX(\"#ACE6BF\");\r\n                        this.statusLayout.color = color;\r\n                        let status = this.statusLayout.children;\r\n                        for (let i = 0; i < status.length; i++) {\r\n                            const element = status[i];\r\n                            color.fromHEX('#7BFFABB4');\r\n                            if (element.getChildByName('level')) {\r\n                                element.getChildByName('level').color = color;\r\n                            }\r\n                        }\r\n                    } else if (value == 1) {\r\n                        color.fromHEX(\"#E2F0AD\");\r\n                        this.statusLayout.color = color;\r\n                        let status = this.statusLayout.children;\r\n                        for (let i = 0; i < status.length; i++) {\r\n                            const element = status[i];\r\n                            color.fromHEX('#CBFA66B4');\r\n                            if (element.getChildByName('level')) {\r\n                                element.getChildByName('level').color = color;\r\n                            }\r\n                        }\r\n                    } else if (value == 2) {\r\n                        color.fromHEX(\"#FA972C\");\r\n                        this.statusLayout.color = color;\r\n                        let status = this.statusLayout.children;\r\n                        for (let i = 0; i < status.length; i++) {\r\n                            const element = status[i];\r\n                            color.fromHEX('#FFB803B4');\r\n                            if (element.getChildByName('level')) {\r\n                                element.getChildByName('level').color = color;\r\n                            }\r\n                        }\r\n                    } else if (value == 3) {\r\n                        color.fromHEX(\"#B9D6E4\");\r\n                        this.statusLayout.color = color;\r\n                        let status = this.statusLayout.children;\r\n                        for (let i = 0; i < status.length; i++) {\r\n                            const element = status[i];\r\n                            color.fromHEX('#5ED4F1B4');\r\n                            if (element.getChildByName('level')) {\r\n                                element.getChildByName('level').color = color;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                this._theme = value;\r\n            }\r\n        },\r\n        background: cc.Sprite,\r\n        statusLayout: cc.Node,\r\n        profile: cc.Sprite,\r\n        shop: cc.Sprite,\r\n        tripBtn: cc.Button,\r\n        workBtn: cc.Button,\r\n        homeBtn: cc.Sprite,\r\n        sleepBtn: cc.Button,\r\n        settingBtn: cc.Sprite,\r\n        functionBtn: cc.Button,\r\n        bag: cc.Node, // 背包节点\r\n        bagContent: cc.Layout, // 背包物品添加的父节点\r\n        bagCloseBtn: cc.Sprite, // 背包关闭按钮\r\n        bagItemArray: [],\r\n\r\n        pet: cc.Node, // 宠物\r\n        petCtrl: cc.Component, // 通过petCtrl关联pet.js\r\n\r\n        _isFunctionShow: true,\r\n        //author:qll\r\n        //time:2019.12.4\r\n        isBagShow: {\r\n            get() {\r\n                return this._isBagShow;\r\n            },\r\n            set(value) {\r\n                if (typeof (value) != 'number') { // 如果非法值，不调用背包控制函数\r\n                    value = 0;\r\n                    this._isBagShow = value;\r\n                }\r\n                if (this._isBagShow > 0) { // 背包被打开的情况下\r\n                    this.closeBag(); // 不管什么值都要先关闭背包\r\n                    if (this._isBagShow != value && value > 0) { // 如果点击不同背包，需要重新打开，例如打开食物背包的情况下，点击了洗澡背包\r\n                        this._isBagShow = value;\r\n                        this.bag.stopAllActions();\r\n                        this.openBag();\r\n                    } else { // 如果是相同背包，则背包显示置为0，表示现在处于关闭状态   \r\n                        this._isBagShow = 0;\r\n                    }\r\n                } else { // 背包关闭的情况下\r\n                    if (value > 0) { // 正常打开背包\r\n                        this._isBagShow = value;\r\n                        this.openBag();\r\n                    } else { // 关闭的情况不能再次关闭，置为关闭状态即可\r\n                        this._isBagShow = 0;\r\n                    }\r\n                }\r\n            }\r\n        },  // 标志位_是否展示背包,根据值判断打开哪个背包\r\n\r\n        sleepPrompt: cc.Node, // 睡觉设置提示框\r\n        isSleepSettingShow: {\r\n            get() {\r\n                return this._isSleepSettingShow;\r\n            },\r\n            set(value) {\r\n                if (value != true && value != false) {\r\n                    value = false;\r\n                }\r\n                if (value == false) {\r\n                    var fout = cc.fadeOut(0.3);\r\n                    this.sleepPrompt.runAction(fout);\r\n                    var s = cc.scaleTo(0.3, 0).easing(cc.easeBackIn());\r\n                    var end_func = cc.callFunc(function () {\r\n                        this.sleepPrompt.active = false;\r\n                    }.bind(this));\r\n                    var seq = cc.sequence([s, end_func]);\r\n                    this.sleepPrompt.runAction(seq);\r\n                } else {\r\n                    // 提示框打开动作部分：\r\n                    // mask 渐变出来;\r\n                    this.sleepPrompt.active = true;\r\n                    var fin = cc.fadeTo(0.3, 255);\r\n                    this.sleepPrompt.runAction(fin);\r\n                    // dlg由小到大\r\n                    this.sleepPrompt.scale = 0;\r\n                    var s = cc.scaleTo(0.4, 1).easing(cc.easeBackOut());\r\n                    this.sleepPrompt.runAction(s);\r\n                }\r\n                this._isSleepSettingShow = value;\r\n            }\r\n        }, //标志位_是否展示睡觉设置框\r\n        workPrompt: cc.Node, // 工作设置提示框\r\n        isWorkSettingShow: {\r\n            get() {\r\n                return this._isWorkSettingShow;\r\n            },\r\n            set(value) {\r\n                if (value != true && value != false) {\r\n                    value = false;\r\n                }\r\n                if (value == false) {\r\n                    var fout = cc.fadeOut(0.3);\r\n                    this.workPrompt.runAction(fout);\r\n                    var s = cc.scaleTo(0.3, 0).easing(cc.easeBackIn());\r\n                    var end_func = cc.callFunc(function () {\r\n                        this.workPrompt.active = false;\r\n                    }.bind(this));\r\n                    var seq = cc.sequence([s, end_func]);\r\n                    this.workPrompt.runAction(seq);\r\n                } else {\r\n                    // 提示框打开动作部分：\r\n                    // mask 渐变出来;\r\n                    this.workPrompt.active = true;\r\n                    var fin = cc.fadeTo(0.3, 255);\r\n                    this.workPrompt.runAction(fin);\r\n                    // dlg由小到大\r\n                    this.workPrompt.scale = 0;\r\n                    var s = cc.scaleTo(0.4, 1).easing(cc.easeBackOut());\r\n                    this.workPrompt.runAction(s);\r\n                }\r\n                this._isWorkSettingShow = value;\r\n            }\r\n        },  //标志位_是否展示工作设置框\r\n        tripPrompt: cc.Node, // 旅游设置提示框\r\n        isTripSettingShow: {\r\n            get() {\r\n                return this._isTripSettingShow;\r\n            },\r\n            set(value) {\r\n                if (value != true && value != false) {\r\n                    value = false;\r\n                }\r\n                if (value == false) {\r\n                    var fout = cc.fadeOut(0.3);\r\n                    this.tripPrompt.runAction(fout);\r\n                    var s = cc.scaleTo(0.3, 0).easing(cc.easeBackIn());\r\n                    var end_func = cc.callFunc(function () {\r\n                        this.tripPrompt.active = false;\r\n                    }.bind(this));\r\n                    var seq = cc.sequence([s, end_func]);\r\n                    this.tripPrompt.runAction(seq);\r\n                } else {\r\n                    // 提示框打开动作部分：\r\n                    // mask 渐变出来;\r\n                    this.tripPrompt.active = true;\r\n                    var fin = cc.fadeTo(0.3, 255);\r\n                    this.tripPrompt.runAction(fin);\r\n                    // dlg由小到大\r\n                    this.tripPrompt.scale = 0;\r\n                    var s = cc.scaleTo(0.4, 1).easing(cc.easeBackOut());\r\n                    this.tripPrompt.runAction(s);\r\n                }\r\n                this._isTripSettingShow = value;\r\n            }\r\n        },  //标志位_是否展示旅游设置框\r\n        _isPlaySettingShow: false,  //标志位_是否展示玩耍子操作框\r\n        _isClockShow: false,  //标志位_是否显示倒计时（用于睡觉、打工和旅游）\r\n\r\n        _isLoginRewardShow: false,  //标志位_是否显示登录奖励\r\n        _isContLoginRewardShow: false,  //标志位_是否显示连续登录奖励\r\n        _isRandomRewardShow: false,  //标志位_是否显示随机奖励\r\n        _isUpgradeRewardShow: false,  //标志位_是否显示升级奖励\r\n\r\n        timeIndex: [],  //不同的时间ID对应的具体秒数（适用于旅游、打工和睡觉操作）P.S. ID0是无效的\r\n        placeIndex: [],\r\n        workTypeIndex: [],\r\n\r\n        workTypeID: 0,  //工种设置\r\n        workTimeID: 0,  //工时设置\r\n\r\n        tripLocID: 0,  //旅游地点设置\r\n        tripTimeID: 0,  //旅游时长设置\r\n        sleepTimeID: 0,  //睡觉时间设置\r\n\r\n        updateID: 0,  //用于退出该页面时清除interval\r\n        selectBagItemIndex: 0,\r\n\r\n        // clock\r\n        clockCanvas: cc.Graphics,\r\n        sleepTimeLabel: cc.Label,\r\n\r\n        // question prompt\r\n        questionPrompt: cc.Node,\r\n\r\n    },\r\n\r\n    //added by qll on 20200104\r\n    loadSound: function () {\r\n        var self = this;\r\n        cc.loader.loadRes('sound/button/1.mp3', cc.AudioClip, (err, btnSound) => {\r\n            if (err) {\r\n                console.log(\"failed to load sound\");\r\n            }\r\n            self.btnSound = btnSound;\r\n        });\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        GlobalData.userID = \"nqEsLYOCtdRUkx4Ovn8bhDUmnBHB3DdEncp0z7ApU1\";\r\n        this.loadSound();\r\n        // console.log(GlobalData);\r\n        this.init();\r\n        //播放打招呼的声音\r\n        switch (GlobalData.species) {\r\n            case 1:\r\n                this.hiSound = cc.url.raw('resources/sound/hi/cat.mp3');\r\n                break;\r\n            case 2:\r\n                this.hiSound = cc.url.raw('resources/sound/hi/dog.mp3');\r\n                break;\r\n            case 3:\r\n                this.hiSound = cc.url.raw('resources/sound/hi/owl.mp3');\r\n                break;\r\n            case 4:\r\n                this.hiSound = cc.url.raw('resources/sound/hi/penguin.mp3');\r\n                break;\r\n            default:\r\n                console.log(\"Wrong species number\")\r\n        }\r\n        var soundVolume = 0.8;\r\n        var hiSoundID = cc.audioEngine.play(this.hiSound, false, soundVolume);\r\n        // var btnSoundID = cc.audioEngine.play(this.btnSound, false, GlobalData.soundVolume);\r\n        // this.drawClock();\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    loadBag: function () {\r\n        //  changed by qll on 20191226\r\n        let date = new Date();\r\n        let year = date.getFullYear(); //获取当前年份   \r\n        let month = date.getMonth() + 1; //获取当前月份   \r\n        let dat = date.getDate(); //获取当前日    \r\n        let hour = date.getHours(); //获取小时   \r\n        let minute = date.getMinutes(); //获取分钟   \r\n        let second = date.getSeconds(); //获取秒   \r\n        let timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\r\n        let data = {\r\n            \"userID\": \"nqEsLYOCtdRUkx4Ovn8bhDUmnBHB3DdEncp0z7ApU1\",\r\n            \"operationTime\": timeStr,\r\n            \"details\": \"user\",\r\n        };\r\n        let self = this;\r\n        let serverAddr = 'https://www.llquruc.top/petGame/php/queryBag.php';\r\n        HttpHelper.httpPost(serverAddr, data, function (_data) {\r\n            if (_data != -1) {\r\n                // console.log(_data);\r\n                let itemIDArray = _data.itemIDArray.split('+');\r\n                let itemNameArray = _data.itemNameArray.split('+');\r\n                let categoryIDArray = _data.categoryIDArray.split('+');\r\n                let categoryNameArray = _data.categoryNameArray.split('+');\r\n                let numberArray = _data.numberArray.split('+');\r\n                for (let index = 0; index < itemIDArray.length; index++) {\r\n                    let item = new BagItem(itemIDArray[index], itemNameArray[index], categoryIDArray[index], categoryNameArray[index], numberArray[index]);\r\n                    self.bagItemArray.push(item);\r\n                }\r\n            }\r\n        });\r\n    },\r\n    // 关闭背包,根据isBagShow的值自己调用，不要单独调用\r\n    closeBag: function () {\r\n        //播放按键音\r\n        ////this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        //var btnSoundID = cc.audioEngine.play(this.btnSound, false, GlobalData.soundVolume);\r\n        console.log(\"close bag\");\r\n        this.bagContent.node.destroyAllChildren();\r\n        let hide = cc.moveTo(0.2, cc.v2(0, 600));\r\n        this.bag.runAction(hide);\r\n    },\r\n    /**\r\n     * 打开背包,根据isBagShow的值自己调用，不要单独调用，逻辑查看isBagShow的注释\r\n     */\r\n    openBag: function () {\r\n        let self = this;\r\n        console.log(\"open bag\");\r\n        for (let i = 0; i < self.bagItemArray.length; i++) {\r\n            let element = self.bagItemArray[i];\r\n            console.log(\"-----------debug log----------\");\r\n            console.log(\"now load bag item: \" + (i + 1));\r\n            if (element.categoryID == this.isBagShow) {\r\n                console.log(\"item: \" + i + ' will be loaded.');\r\n                let picName = 'shopPic/cate' + element.categoryID + '/' + element.id;\r\n                cc.loader.loadRes(picName, cc.SpriteFrame, (err, sp) => {\r\n                    if (err) {\r\n                        console.log('failed to load sprite ' + picName);\r\n                    }\r\n                    cc.loader.loadRes(\"prefab/bagItem\", cc.Prefab, (err, prf) => {\r\n                        console.log(element);\r\n                        if (err) {\r\n                            console.log('error: get prefab' + err + \"prefab/bagItem\");\r\n                        }\r\n                        if (!(prf instanceof cc.Prefab)) {\r\n                            console.log(\"not a prefab\");\r\n                        }\r\n                        let bagItem = cc.instantiate(prf);\r\n                        bagItem.zIndex = i;\r\n                        bagItem.name = element.categoryID + '_' + element.id;\r\n                        bagItem.getComponent('bagItem').init(element.number, sp);\r\n                        self.bagContent.node.addChild(bagItem);\r\n                        bagItem.getChildByName('itemPic').on(cc.Node.EventType.TOUCH_START, function () {\r\n                            // 选中物品\r\n                            let selectNode = bagItem.getChildByName('itemPic');\r\n                            // 阴影复制物品\r\n                            let copyNode = cc.instantiate(selectNode);\r\n                            // 阴影物品代替选中物品的位置\r\n                            selectNode.parent.addChild(copyNode);\r\n                            copyNode.opacity = 100;\r\n                            let pos = selectNode.parent.convertToWorldSpaceAR(copyNode.position);\r\n                            pos = self.bag.parent.convertToNodeSpaceAR(pos);\r\n                            // 被选中的物品进入与宠物同一个层级  \r\n                            self.bag.parent.addChild(selectNode);\r\n                            selectNode.position = pos;\r\n                            self.selectBagItemIndex = i; // 记录背包里选中的物品\r\n                            // console.log(selectNode, copyNode)\r\n                            selectNode.on(cc.Node.EventType.TOUCH_MOVE, self.onTouchMove, self);\r\n                            selectNode.on(cc.Node.EventType.TOUCH_END, self.onTouchEnd, self);\r\n                            selectNode.on(cc.Node.EventType.TOUCH_CANCEL, self.onTouchCancel, self);\r\n                        });\r\n                    })\r\n                })\r\n            }\r\n        }\r\n        // 提示框打开动作部分：\r\n        let show = cc.moveTo(0.2, cc.v2(0, 100));\r\n        self.bag.runAction(show);\r\n    },\r\n\r\n    //触摸移动；\r\n    onTouchMove: function (event) {\r\n        let self = this;\r\n        console.log(\"touch move\");\r\n        let selectItemName = self.bagItemArray[self.selectBagItemIndex].categoryID + '_' + self.bagItemArray[self.selectBagItemIndex].id;\r\n        let copyNode = self.bagContent.node.getChildByName(selectItemName).getChildByName('itemPic');\r\n        let selectNode = self.bag.parent.getChildByName('itemPic');\r\n        // 转换为世界坐标\r\n        let pos = copyNode.parent.convertToWorldSpaceAR(copyNode.position);\r\n        pos = self.bag.parent.convertToNodeSpaceAR(pos);\r\n        let nodeP = pos;\r\n        let touches = event.getTouches();\r\n        //触摸刚开始的位置\r\n        let oldPos = selectNode.parent.convertToNodeSpaceAR(touches[0].getStartLocation());\r\n\r\n        //触摸时不断变更的位置\r\n        let newPos = selectNode.parent.convertToNodeSpaceAR(touches[0].getLocation());\r\n        let subPos = oldPos.sub(newPos); // 2.X版本是 p1.sub(p2);\r\n\r\n        selectNode.x = nodeP.x - subPos.x;\r\n        selectNode.y = nodeP.y - subPos.y;\r\n\r\n        // 控制节点移不出屏幕; \r\n        let minX = -selectNode.parent.width / 2 + selectNode.width / 2; //最小X坐标；\r\n        let maxX = Math.abs(minX);\r\n        let minY = -selectNode.parent.height / 2 + selectNode.height / 2; //最小Y坐标；\r\n        let maxY = Math.abs(minY);\r\n        let nPos = selectNode.getPosition(); //节点实时坐标；\r\n\r\n        if (nPos.x < minX) {\r\n            nPos.x = minX;\r\n        };\r\n        if (nPos.x > maxX) {\r\n            nPos.x = maxX;\r\n        };\r\n        if (nPos.y < minY) {\r\n            nPos.y = minY;\r\n        };\r\n        if (nPos.y > maxY) {\r\n            nPos.y = maxY;\r\n        };\r\n        selectNode.setPosition(nPos);\r\n    },\r\n    // 背包物品触摸结束\r\n    onTouchEnd() {\r\n        let self = this;\r\n        // 宠物矩形框\r\n        let petRect = new cc.Rect(self.pet.x, self.pet.y, self.pet.width, self.pet.height);\r\n        // 找到所选物品所在的物品块的名字\r\n        let selectItemName = self.bagItemArray[self.selectBagItemIndex].categoryID + '_' + self.bagItemArray[self.selectBagItemIndex].id\r\n        // 留下的阴影复制物品\r\n        let copyNode = self.bagContent.node.getChildByName(selectItemName).getChildByName('itemPic');\r\n        // 选中的物品\r\n        let selectNode = self.bag.parent.getChildByName('itemPic');\r\n        selectNode.pauseSystemEvents(true);\r\n        // 物品矩形框\r\n        let pos = copyNode.parent.convertToWorldSpaceAR(copyNode.position);\r\n        pos = self.bag.parent.convertToNodeSpaceAR(pos);\r\n        let useRect = new cc.Rect(selectNode.x, selectNode.y, selectNode.width, selectNode.height);\r\n        console.log(\"touch end\");\r\n        if (petRect.intersects(useRect) && self.petCtrl.flagPetOperBtnEnable == true) { // 判断两个矩形框是否重叠 并且 宠物处于可操作状态\r\n            // 矩形重叠说明进行喂食等操作\r\n            // console.log(self.testNode.parent.parent.getChildByName('pet'));\r\n            if (self.bagItemArray[self.selectBagItemIndex].categoryID == 1) {\r\n                // selectNode.parent.parent.getChildByName('pet').getComponent('pet').eat(self.bagItemArray[self.selectBagItemIndex].id);\r\n                self.petCtrl.eat(self.bagItemArray[self.selectBagItemIndex].id);\r\n            } else if (self.bagItemArray[self.selectBagItemIndex].categoryID == 2) {\r\n                self.petCtrl.shower(self.bagItemArray[self.selectBagItemIndex].id);\r\n            } else if (self.bagItemArray[self.selectBagItemIndex].categoryID == 10) {\r\n                self.petCtrl.play(self.bagItemArray[self.selectBagItemIndex].id);\r\n            }\r\n            selectNode.setPosition(copyNode.position);\r\n            copyNode.destroy();\r\n            self.bagContent.node.getChildByName(selectItemName).addChild(selectNode);\r\n            if (self.bagItemArray[self.selectBagItemIndex].number == 1) { // 该物品将用完，动态在背包中删除\r\n                self.bagContent.node.getChildByName(selectItemName).destroy();\r\n            } else {\r\n                self.bagItemArray[self.selectBagItemIndex].number -= 1;\r\n                console.log(self.bagContent.node.getChildByName(selectItemName).getChildByName('numberBlock').getChildByName('number'));\r\n                self.bagContent.node.getChildByName(selectItemName).getChildByName('numberBlock').getChildByName('number').getComponent(cc.Label).string = self.bagItemArray[self.selectBagItemIndex].number;\r\n            }\r\n\r\n        } else {\r\n            let backEnd = cc.callFunc(function () {\r\n                selectNode.setPosition(copyNode.position);\r\n                copyNode.destroy();\r\n                self.bagContent.node.getChildByName(selectItemName).addChild(selectNode);\r\n                selectNode.resumeSystemEvents(true);\r\n            }, self, null);\r\n            console.log(pos, selectNode.position);\r\n            let back = cc.sequence(cc.moveTo(0.2, pos.x, pos.y), backEnd);\r\n            selectNode.runAction(back);\r\n            console.log(\"touch end second\");\r\n            console.log(selectNode);\r\n        }\r\n    },\r\n    // 背包物品触摸取消，同触摸结束的操作\r\n    onTouchCancel: function () {\r\n        let self = this;\r\n        // 宠物矩形框\r\n        let petRect = new cc.Rect(self.pet.x, self.pet.y, self.pet.width, self.pet.height);\r\n        // 找到所选物品所在的物品块的名字\r\n        let selectItemName = self.bagItemArray[self.selectBagItemIndex].categoryID + '_' + self.bagItemArray[self.selectBagItemIndex].id\r\n        // 留下的阴影复制物品\r\n        let copyNode = self.bagContent.node.getChildByName(selectItemName).getChildByName('itemPic');\r\n        // 选中的物品\r\n        let selectNode = self.bag.parent.getChildByName('itemPic');\r\n        selectNode.pauseSystemEvents(true);\r\n        // 物品矩形框\r\n        let pos = copyNode.parent.convertToWorldSpaceAR(copyNode.position);\r\n        pos = self.bag.parent.convertToNodeSpaceAR(pos);\r\n        let useRect = new cc.Rect(selectNode.x, selectNode.y, selectNode.width, selectNode.height);\r\n        console.log(\"touch end\");\r\n        if (petRect.intersects(useRect) && self.petCtrl.flagPetOperBtnEnable == true) { // 判断两个矩形框是否重叠\r\n            // 矩形重叠说明进行喂食等操作\r\n            // console.log(self.testNode.parent.parent.getChildByName('pet'));\r\n            if (self.bagItemArray[self.selectBagItemIndex].categoryID == 1) {\r\n                self.petCtrl.eat(self.bagItemArray[self.selectBagItemIndex].id);\r\n            } else if (self.bagItemArray[self.selectBagItemIndex].categoryID == 2) {\r\n                self.petCtrl.shower(self.bagItemArray[self.selectBagItemIndex].id);\r\n            } else if (self.bagItemArray[self.selectBagItemIndex].categoryID == 10) {\r\n                self.petCtrl.play(self.bagItemArray[self.selectBagItemIndex].id);\r\n            }\r\n            selectNode.setPosition(copyNode.position);\r\n            copyNode.destroy();\r\n            self.bagContent.node.getChildByName(selectItemName).addChild(selectNode);\r\n            if (self.bagItemArray[self.selectBagItemIndex].number == 1) { // 该物品将用完，动态在背包中删除\r\n                self.bagContent.node.getChildByName(selectItemName).destroy();\r\n            } else {\r\n                self.bagItemArray[self.selectBagItemIndex].number -= 1;\r\n                console.log(self.bagContent.node.getChildByName(selectItemName).getChildByName('numberBlock').getChildByName('number'));\r\n                self.bagContent.node.getChildByName(selectItemName).getChildByName('numberBlock').getChildByName('number').getComponent(cc.Label).string = self.bagItemArray[self.selectBagItemIndex].number;\r\n            }\r\n\r\n        } else {\r\n            let backEnd = cc.callFunc(function () {\r\n                selectNode.setPosition(copyNode.position);\r\n                copyNode.destroy();\r\n                self.bagContent.node.getChildByName(selectItemName).addChild(selectNode);\r\n                selectNode.resumeSystemEvents(true);\r\n            }, self, null);\r\n            console.log(pos, selectNode.position);\r\n            let back = cc.sequence(cc.moveTo(0.2, pos.x, pos.y), backEnd);\r\n            selectNode.runAction(back);\r\n            console.log(\"touch cancel second\");\r\n            console.log(selectNode);\r\n        }\r\n    },\r\n\r\n    //生成登录奖励\r\n    genLoginReward: function () {//  changed by qll on 20200116\r\n        let date = new Date();\r\n        let year = date.getFullYear(); //获取当前年份   \r\n        let month = date.getMonth() + 1; //获取当前月份   \r\n        let dat = date.getDate(); //获取当前日    \r\n        let hour = date.getHours(); //获取小时   \r\n        let minute = date.getMinutes(); //获取分钟   \r\n        let second = date.getSeconds(); //获取秒   \r\n        let timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\r\n        let serverAddr = GlobalData.serverAddr + \"php/genReward.php\";\r\n        let instance = this;\r\n        // 调用自定义网路接口获取登录奖励\r\n        let data = {\r\n            \"userID\": GlobalData.userID,\r\n            \"genTime\": timeStr,\r\n            \"rewardCategoryID\": 1,\r\n            \"rewardLevel\": 1,\r\n        };\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                GlobalData.loginRewardCoin = res.rewardCoin;//奖励金币数\r\n                GlobalData.loginRewardGrowth = res.rewardGrowth;//奖励成长值\r\n            }\r\n        });\r\n    },\r\n\r\n    //生成连续登录奖励\r\n    genContLoginReward: function () {//  changed by qll on 20191226\r\n        let date = new Date();\r\n        let year = date.getFullYear(); //获取当前年份   \r\n        let month = date.getMonth() + 1; //获取当前月份   \r\n        let dat = date.getDate(); //获取当前日    \r\n        let hour = date.getHours(); //获取小时   \r\n        let minute = date.getMinutes(); //获取分钟   \r\n        let second = date.getSeconds(); //获取秒   \r\n        let timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\r\n        let serverAddr = GlobalData.serverAddr + \"php/genReward.php\";\r\n        let instance = this;\r\n        // 调用自定义网路接口获取连续登录奖励\r\n        let data = {\r\n            \"userID\": GlobalData.userID,\r\n            \"genTime\": timeStr,\r\n            \"rewardCategoryID\": 2,\r\n            \"rewardLevel\": GlobalData.contLoginDays,\r\n        };\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                GlobalData.contLoginRewardCoin = res.rewardCoin;//奖励金币数\r\n                GlobalData.contLoginRewardGrowth = res.rewardGrowth;//奖励成长值\r\n            }\r\n        });\r\n    },\r\n\r\n\r\n\r\n    autoUpdate: function () {\r\n        this.hunger.string = GlobalData.hunger;  // 饥饿值\r\n        this.cleaness.string = GlobalData.cleaness; // 清洁值\r\n        this.thirst.string = GlobalData.thirst; // 口渴值\r\n        this.mood.string = GlobalData.mood; // 心情值\r\n        this.energy.string = GlobalData.energy; // 能量值\r\n        this.growth.string = GlobalData.growth; // 成长值\r\n        this.growthLevel.string = GlobalData.growthLevel; // 成长值等级\r\n        //检查是否有奖励生成（仅限随机和升级）\r\n        if (GlobalData.flagRandomReward == true) {\r\n            this._isRandomRewardShow = true;  //在主界面某处出现随机奖励\r\n        }\r\n        if (GlobalData.flagUpgradeReward == true) {\r\n            this._isUpgradeRewardShow = true;  //弹出升级奖励框\r\n        }\r\n    },\r\n\r\n    init: function () {   //进入该页面时调用此函数\r\n        // let interval = 1000;  //1秒\r\n        // this.updateID = setInterval(this.autoUpdate, interval);\r\n        this._isFunctionShow = true;\r\n        this.timeIndex = [0, 30, 40, 50, 60];\r\n        this.placeIndex = [\r\n            \"安徽\", \"澳门\", \"北京\", \"重庆\", \"福建\", \"甘肃\", \"广东\", \"广西\",\r\n            \"贵州\", \"海南\", \"河北\", \"河南\", \"黑龙江\", \"湖北\", \"湖南\", \"吉林\",\r\n            \"江苏\", \"江西\", \"辽宁\", \"内蒙古\", \"宁夏\", \"青海\", \"山东\", \"山西\",\r\n            \"陕西\", \"上海\", \"四川\", \"台湾\", \"天津\", \"西藏\", \"香港\", \"新疆\",\r\n            \"云南\", \"浙江\"\r\n        ];\r\n        this.workTypeIndex = [\r\n            \"种花\", \"野外勘探\", \"画漫画\", \"当导游\", \"发广告\", \"算账\"\r\n        ];\r\n        this.loadBag();\r\n        this.queryAttribute();\r\n        this.theme = GlobalData.bgPicNum;\r\n        this.petCtrl = this.node.parent.getChildByName('pet').getComponent('pet');\r\n        console.log(this.petCtrl);\r\n    },\r\n\r\n    exit: function () {  //退出该页面时调用此函数\r\n        clearInterval(this.updateID);\r\n    },\r\n\r\n    onPlusBtnClicked: function () {\r\n        //播放按键音效\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        //var btnSoundID = cc.audioEngine.play(this.btnSound, false, GlobalData.soundVolume);\r\n        // 动作期间禁用功能按钮\r\n        this.functionBtn.interactable = false;\r\n        this.showFunction();\r\n    },\r\n\r\n    showFunction: function () {\r\n        this._isFunctionShow = !this._isFunctionShow;\r\n        let actionSleepBtn = null;\r\n        let actionWorkBtn = null;\r\n        let actionTripBtn = null;\r\n        let actionSettingBtn = null;\r\n        // 动作结束时触发回调函数，让功能按钮恢复使用\r\n        let funcBtnEnd = cc.callFunc(function () {\r\n            this.functionBtn.interactable = true;\r\n        }, this, null);\r\n        let actionPlusBtn = cc.sequence(cc.rotateBy(0.7, 360), funcBtnEnd);\r\n        if (!this._isFunctionShow) {\r\n            actionSleepBtn = cc.spawn(cc.moveBy(0.5, cc.v2(0, 60)), cc.fadeOut(0.7));\r\n            actionWorkBtn = cc.spawn(cc.moveBy(0.6, cc.v2(0, 120)), cc.fadeOut(0.7));\r\n            actionTripBtn = cc.spawn(cc.moveBy(0.7, cc.v2(0, 180)), cc.fadeOut(0.7));\r\n            actionSettingBtn = cc.spawn(cc.moveBy(0.8, cc.v2(0, 240)), cc.fadeOut(0.7));\r\n        } else {\r\n            actionSleepBtn = cc.spawn(cc.moveBy(0.5, cc.v2(0, -60)), cc.fadeIn(0.5));\r\n            actionWorkBtn = cc.spawn(cc.moveBy(0.5, cc.v2(0, -120)), cc.fadeIn(0.5));\r\n            actionTripBtn = cc.spawn(cc.moveBy(0.5, cc.v2(0, -180)), cc.fadeIn(0.5));\r\n            actionSettingBtn = cc.spawn(cc.moveBy(0.5, cc.v2(0, -240)), cc.fadeIn(0.5));\r\n        }\r\n        this.tripBtn.node.runAction(actionTripBtn);\r\n        this.workBtn.node.runAction(actionWorkBtn);\r\n        this.sleepBtn.node.runAction(actionSleepBtn);\r\n        this.settingBtn.node.runAction(actionSettingBtn);\r\n        this.functionBtn.node.runAction(actionPlusBtn);\r\n    },\r\n\r\n\r\n\r\n    queryAttribute: function () {//  changed by qll on 20191226\r\n        let serverAddr = GlobalData.serverAddr + \"php/queryUserAttribute.php\";\r\n        // 调用自定义网路接口进行查询\r\n        let data = {\r\n            \"userID\": \"nqEsLYOCtdRUkx4Ovn8bhDUmnBHB3DdEncp0z7ApU1\"\r\n        };\r\n        let self = this;\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                GlobalData.coin = res.coin;//金币值\r\n                GlobalData.title = res.title;//主人称呼\r\n            }\r\n        });\r\n        serverAddr = GlobalData.serverAddr + \"php/queryPetAttribute.php\";\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                GlobalData.lastLoginTime = res.lastLoginTime;//上一次登录时间\r\n                GlobalData.contLoginDays = res.contLoginDays; //连续登录天数\r\n                GlobalData.species = res.species;// 宠物种类\r\n                GlobalData.name = res.name;// 宠物名字\r\n                GlobalData.gender = res.gender;//  宠物性别\r\n                GlobalData.color = res.color;// 宠物毛色\r\n                GlobalData.hunger = res.hunger;// 宠物饥饿值\r\n                GlobalData.hungerCeiling = res.hungerCeiling;// 宠物饥饿值上限\r\n                GlobalData.cleaness = res.cleaness;// 宠物清洁值\r\n                GlobalData.cleanessCeiling = res.cleanessCeiling;// 宠物清洁值上限\r\n                GlobalData.thirst = res.thirst;// 宠物口渴值\r\n                GlobalData.thirstCeiling = res.thirstCeiling;// 宠物口渴值上限\r\n                GlobalData.mood = res.mood;// 宠物心情值\r\n                GlobalData.moodCeiling = res.moodCeiling;// 宠物心情值上限\r\n                GlobalData.energy = res.energy;// 宠物能量值\r\n                GlobalData.energyCeiling = res.energyCeiling;// 宠物能量值上限\r\n                GlobalData.growth = res.growth;// 宠物成长值\r\n                GlobalData.growthLevel = res.growthLevel;// 宠物成长等级\r\n                GlobalData.flagAgeGroup = res.flagAgeGroup;// 标志位：幼年or成年\r\n                GlobalData.flagSkipping = res.flagSkipping;// 标志位_是否解锁“跳绳”操作\r\n                GlobalData.flagStory = res.flagStory;// 标志位_是否解锁“讲故事”操作\r\n                GlobalData.flagSleep = res.flagSleep;// 标志位-是否正在睡觉\r\n                GlobalData.sleepRemainTime = res.sleepRemainTime;// 睡觉剩余时长\r\n                GlobalData.flagWork = res.flagWork;// 标志位-是否正在打工\r\n                GlobalData.workRemainTime = res.workRemainTime;// 打工剩余时长\r\n                GlobalData.flagTrip = res.flagTrip;// 标志位-是否正在旅游\r\n                GlobalData.tripRemainTime = res.tripRemainTime;// 旅游剩余时长\r\n            }\r\n        });\r\n        serverAddr = GlobalData.serverAddr + \"php/querySetting.php\";\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                GlobalData.flagBgMusic = res.flagBgMusic;//标志位_是否开启背景音乐\r\n                GlobalData.bgMusicVolume = res.bgMusicVolume;//背景音乐音量\r\n                GlobalData.bgMusicNum = res.bgMusicNum;//背景音乐曲目编号\r\n                GlobalData.bgPicNum = res.bgPicNum;//背景图片编号\r\n                self.theme = GlobalData.bgPicNum;\r\n                GlobalData.flagSound = res.flagSound;//标志位_是否开启音效\r\n                GlobalData.soundVolume = res.soundVolume;//音效音量\r\n                GlobalData.flagNotice = res.flagNotice;//标志位_是否开启推送通知\r\n                GlobalData.flagLocation = res.flagLocation;//标志位_是否开启摄像头权限\r\n                GlobalData.flagVibration = res.flagVibration;//标志位_是否开启震动\r\n            }\r\n        });\r\n        serverAddr = GlobalData.serverAddr + \"php/queryDecBag.php\";\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                GlobalData.bag.itemIDArrayStr = res.itemIDArray;//物品ID数组\r\n                GlobalData.bag.itemNameArrayStr = res.itemNameArray;//物品名称数组（英文）\r\n                GlobalData.bag.categoryIDArrayStr = res.categoryArray;//物品类别ID数组\r\n                GlobalData.bag.categoryNameArrayStr = res.categoryNameArray;//物品类别名称数组\r\n                GlobalData.bag.flagEnableArrayStr = res.flagEnableArray;//物品是否启用的标志位数组\r\n            }\r\n        });\r\n\r\n    },\r\n\r\n    //点击获取奖励\r\n    //参数说明：1：登录奖励；2：连续登录奖励；3：升级奖励；4：随机奖励\r\n    onClickGetReward: function (rewardCategoryID) {//  changed by qll on 20191226\r\n        let date = new Date();\r\n        let year = date.getFullYear(); //获取当前年份   \r\n        let month = date.getMonth() + 1; //获取当前月份   \r\n        let dat = date.getDate(); //获取当前日    \r\n        let hour = date.getHours(); //获取小时   \r\n        let minute = date.getMinutes(); //获取分钟   \r\n        let second = date.getSeconds(); //获取秒   \r\n        let timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\r\n        let serverAddr = GlobalData.serverAddr + \"php/getReward.php\";\r\n        let details = 'Category:' + rewardCategoryID.toString();\r\n        let rewardCoin = 0;\r\n        let rewardGrowth = 0;\r\n        let rewardItemID = 0;\r\n        let rewardItemCateID = 0;\r\n        if (rewardCategoryID == 1) {  //登录奖励\r\n            rewardCoin = GlobalData.loginRewardCoin;\r\n            rewardGrowth = GlobalData.loginRewardGrowth;\r\n        }\r\n        else if (rewardCategoryID == 2) {  //连续登录奖励\r\n            rewardCoin = GlobalData.contLoginRewardCoin;\r\n            rewardGrowth = GlobalData.contLoginRewardGrowth;\r\n        }\r\n        else if (rewardCategoryID == 3) {  //升级奖励\r\n            rewardCoin = GlobalData.upgradeRewardCoin;\r\n            rewardItemID = GlobalData.upgradeRewardItemID;\r\n            rewardItemCateID = GlobalData.upgradeRewardItemCateID;\r\n        }\r\n        else {  //随机奖励\r\n            rewardItemID = GlobalData.randomRewardItemID;\r\n            rewardItemCateID = GlobalData.randomRewardItemCateID;\r\n        }\r\n        // 调用自定义网路接口领取奖励\r\n        let data = {\r\n            \"userID\": GlobalData.userID,\r\n            \"getTime\": timeStr,\r\n            \"rewardCoin\": rewardCoin,\r\n            \"rewardGrowth\": rewardGrowth,\r\n            \"rewardItemID\": rewardItemID,\r\n            \"rewardItemCateID\": rewardItemCateID,\r\n            \"details\": details,\r\n        };\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n            }\r\n        });\r\n    },\r\n\r\n\r\n    onClickEatBtn: function () {  //点击吃饭按钮\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        //var btnSoundID = cc.audioEngine.play(this.btnSound, false, GlobalData.soundVolume);\r\n        console.log(\"点击吃饭\");\r\n        this.isBagShow = 1;\r\n    },\r\n\r\n    onClickShowerBtn: function () {  //点击洗澡按钮\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        //var btnSoundID = cc.audioEngine.play(this.btnSound, false, GlobalData.soundVolume);\r\n        console.log(\"点击洗澡\");\r\n        this.isBagShow = 2;\r\n    },\r\n\r\n    onClickDrinkBtn: function () {  //点击喝水按钮 //  changed by qll on 20191226\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        //var btnSoundID = cc.audioEngine.play(this.btnSound, false, GlobalData.soundVolume);\r\n        console.log(\"点击喝水\");\r\n        let date = new Date();\r\n        let year = date.getFullYear(); //获取当前年份   \r\n        let month = date.getMonth() + 1; //获取当前月份   \r\n        let dat = date.getDate(); //获取当前日    \r\n        let hour = date.getHours(); //获取小时   \r\n        let minute = date.getMinutes(); //获取分钟   \r\n        let second = date.getSeconds(); //获取秒   \r\n        let timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\r\n        let serverAddr = GlobalData.serverAddr + \"php/drink.php\";\r\n        let details = '';\r\n        // 调用自定义网路接口\r\n        let data = {\r\n            \"userID\": GlobalData.userID,\r\n            \"operationTime\": timeStr,\r\n            \"details\": details,\r\n        };\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                //无需更新属性值，后台会自动更新\r\n            }\r\n        });\r\n    },\r\n\r\n\r\n    onClickPlayBtn: function () {  //点击玩耍按钮\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        //var btnSoundID = cc.audioEngine.play(this.btnSound, false, GlobalData.soundVolume);\r\n        console.log(\"点击玩耍\");\r\n        this._isPlaySettingShow = true;  //显示玩耍子类别按钮\r\n    },\r\n\r\n    //  changed by qll on 20191226\r\n    onClickSubPlayBtn: function (playID) {  //点击玩耍子类别按钮\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        //var btnSoundID = cc.audioEngine.play(this.btnSound, false, GlobalData.soundVolume);\r\n        let date = new Date();\r\n        let year = date.getFullYear(); //获取当前年份   \r\n        let month = date.getMonth() + 1; //获取当前月份   \r\n        let dat = date.getDate(); //获取当前日    \r\n        let hour = date.getHours(); //获取小时   \r\n        let minute = date.getMinutes(); //获取分钟   \r\n        let second = date.getSeconds(); //获取秒   \r\n        let timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\r\n        let serverAddr = GlobalData.serverAddr + \"php/play.php\";\r\n        let details = '';\r\n        // 调用自定义网路接口\r\n        let data = {\r\n            \"userID\": GlobalData.userID,\r\n            \"operationTime\": timeStr,\r\n            \"playID\": playID,\r\n            \"details\": details,\r\n        };\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                //无需更新属性值，后台会自动更新\r\n            }\r\n        });\r\n    },\r\n\r\n\r\n    startCountDown: function (operationName, id, QANum, picNum) {\r\n        //参数的意义：operationName表示到底是为了什么操作而进行倒计时（work或trip或sleep）id 代表旅游地点或者工作种类\r\n        //trip:0 work:1\r\n        if (operationName == 'trip') {\r\n            this.questionPrompt.getComponent('questionPrompt').init(0, this.tripLocID, QANum, picNum);\r\n        } else if (operationName == 'work') {\r\n            this.questionPrompt.getComponent('questionPrompt').init(1, this.workTypeID, QANum, picNum);\r\n        }\r\n\r\n        // 提示框打开动作部分：\r\n        // mask 渐变出来;\r\n        this.questionPrompt.active = true;\r\n        var fin = cc.fadeTo(0.3, 255);\r\n        this.questionPrompt.runAction(fin);\r\n        // dlg由小到大\r\n        this.questionPrompt.scale = 0;\r\n        var s = cc.scaleTo(0.4, 1).easing(cc.easeBackOut());\r\n        this.questionPrompt.runAction(s);\r\n    },\r\n\r\n    onClickCloseBagBtn: function () {  //点击主界面上的关闭背包按钮\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        //var btnSoundID = cc.audioEngine.play(this.btnSound, false, GlobalData.soundVolume);\r\n        console.log(\"关闭背包\");\r\n        this.isBagShow = 0;\r\n    },\r\n\r\n    onClickTripCloseBtn: function () {\r\n        // 音效尚未添加 -- need audio\r\n        this.isTripSettingShow = false;\r\n    },\r\n\r\n    onClickTripBtn: function () {  //点击主界面上的旅游按钮\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        //var btnSoundID = cc.audioEngine.play(this.btnSound, false, GlobalData.soundVolume);\r\n        if (this.petCtrl.flagPetOperBtnEnable == true) {\r\n            if (GlobalData.energy >= 0 && GlobalData.mood >= 0) {\r\n                console.log(\"打开旅游提示框\");\r\n                this.isTripSettingShow = true;  //显示旅游设置框\r\n                // 初始化提示框下拉框的值\r\n                let dropdownData = ['30s', '40s', '50s', '60s']; // 四个值，不能与timeIndex数组对应\r\n                this.tripPrompt.getChildByName('timeDropDownBox').getComponent('dropdown').init(dropdownData);  // 时间下拉框\r\n                dropdownData = this.placeIndex;\r\n                this.tripPrompt.getChildByName('placeDropDownBox').getComponent('dropdown').init(dropdownData); // 地点下拉框\r\n            } else {\r\n                let promptStr = '宠物能量值不低于50且心情值不低于30才可以去旅游哟~~';\r\n                // 失败提示，待写\r\n            }\r\n        } else {\r\n            let promptStr = '您的宠物现在正忙哟~~';\r\n            // 失败提示，待写\r\n        }\r\n\r\n    },\r\n\r\n    //  changed by qll on 20191226\r\n    onClickConfirmTrip: function () {//完成所有设置后，点击“去旅游”\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        //var btnSoundID = cc.audioEngine.play(this.btnSound, false, GlobalData.soundVolume);\r\n\r\n        // 游戏里需要完成的操作\r\n        this.tripPrompt.active = false; // 关闭提示框\r\n        this.pet.active = false; // 隐藏宠物\r\n        this.petCtrl.goTrip();\r\n        this.tripTimeID = this.tripPrompt.getChildByName('timeDropDownBox').getComponent('dropdown').selectIndex + 1; // 加1是为了与timeIndex对应起来\r\n        this.tripLocID = this.tripPrompt.getChildByName('placeDropDownBox').getComponent('dropdown').selectIndex + 1;\r\n        this.clockCanvas.counter = parseInt(this.timeIndex[this.tripTimeID]); // 旅游计数器\r\n        var self = this;\r\n        // http post\r\n        let date = new Date();\r\n        let year = date.getFullYear(); //获取当前年份   \r\n        let month = date.getMonth() + 1; //获取当前月份   \r\n        let dat = date.getDate(); //获取当前日    \r\n        let hour = date.getHours(); //获取小时   \r\n        let minute = date.getMinutes(); //获取分钟   \r\n        let second = date.getSeconds(); //获取秒   \r\n        var timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\r\n        var serverAddr = GlobalData.serverAddr + \"php/trip_select.php\";\r\n\r\n        // 调用自定义网路接口\r\n        var data = {\r\n            \"userID\": GlobalData.userID,\r\n            \"tripTimeID\": this.tripTimeID,\r\n            \"tripLocID\": this.tripLocID,\r\n        };\r\n        var details = '';\r\n        var QANum = 0;  //题目文件编号\r\n        var picNum = 0;  //旅游照片编号 \r\n        var moodChangedValue = 0;\r\n        var energyChangedValue = 0;\r\n        var coinChangedValue = 0;\r\n        var growthChangedValue = 0;\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                //无需更新属性值，后台会自动更新，但可以根据这些属性值对用户做出提示\r\n                moodChangedValue = res.moodChangedValue;\r\n                energyChangedValue = res.energyChangedValue;\r\n                coinChangedValue = res.coinChangedValue;\r\n                growthChangedValue = res.growthChangedValue;\r\n                QANum = res.QANum;  //题目文件编号\r\n                picNum = res.picNum;  //旅游照片编号 \r\n                //开始更新后台值\r\n                serverAddr = GlobalData.serverAddr + \"php/trip_update.php\";\r\n                data = {\r\n                    \"userID\": GlobalData.userID,\r\n                    \"operationTime\": timeStr,\r\n                    \"moodChangedValue\": moodChangedValue,\r\n                    \"energyChangedValue\": energyChangedValue,\r\n                    \"coinChangedValue\": coinChangedValue,\r\n                    \"growthChangedValue\": growthChangedValue,\r\n                    \"picNum\": picNum,\r\n                    \"tripTime\": self.timeIndex[self.tripTimeID],\r\n                    \"tripLocID\": self.tripLocID,\r\n                    \"details\": details,\r\n                };\r\n                HttpHelper.httpPost(serverAddr, data, function (res) {\r\n                    //nothing happens,\r\n                });\r\n            }\r\n        });\r\n\r\n        // 计数函数\r\n        this.clockCanvas.callback = function () {\r\n            this.counter--;\r\n            if (this.counter < 1) {\r\n                this.unschedule(this.callback);\r\n                this.node.parent.active = false;\r\n                self.pet.active = true;\r\n                self.startCountDown('trip', self.tripLocID, QANum, picNum);\r\n                self.petCtrl.tripEnd() //  宠物状态开锁\r\n            }\r\n            this.node.parent.getChildByName('time').getComponent(cc.Label).string = this.counter;\r\n            this.circle(0, 0, 20);\r\n            this.fill();\r\n            this.arc(0, 0, 10, Math.PI / 2, Math.PI / 2 - 2 * this.counter / self.timeIndex[self.tripTimeID] * Math.PI, false);\r\n            this.stroke();\r\n        }\r\n        // 计时函数，每一秒执行一次\r\n        this.clockCanvas.node.parent.active = true; //打开工作倒计时\r\n        this.clockCanvas.schedule(this.clockCanvas.callback, 1);\r\n\r\n    },\r\n\r\n    onClickWorkCloseBtn: function () {\r\n        // 音效尚未添加 -- need audio\r\n        this.isWorkSettingShow = false;\r\n    },\r\n\r\n    onClickWorkBtn: function () {  //点击主界面上的工作按钮\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        //var btnSoundID = cc.audioEngine.play(this.btnSound, false, GlobalData.soundVolume);\r\n        console.log(this.petCtrl.flagPetOperBtnEnable);\r\n        if (this.petCtrl.flagPetOperBtnEnable == true) {\r\n            if (GlobalData.energy >= 0) {\r\n                console.log(\"打开工作提示框\");\r\n                this.isWorkSettingShow = true;  //显示工作设置框\r\n                // 初始化提示框下拉框的值\r\n                let dropdownData = ['30s', '40s', '50s', '60s']; // 四个值，不能与timeIndex数组对应\r\n                this.workPrompt.getChildByName('timeDropDownBox').getComponent('dropdown').init(dropdownData);  // 时间下拉框\r\n                dropdownData = this.workTypeIndex;\r\n                this.workPrompt.getChildByName('typeDropDownBox').getComponent('dropdown').init(dropdownData);  // 时间下拉框\r\n            } else {\r\n                let promptStr = '宠物能量值不低于50才可以去工作哟~~';\r\n                // 失败提示框！未设置\r\n            }\r\n        } else {\r\n            let promptStr = '您的宠物正忙';\r\n            // 失败提示框！未设置\r\n        }\r\n    },\r\n\r\n    //  changed by qll on 20191226\r\n    onClickConfirmWork: function () {//完成所有设置后，点击“去工作”\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        // 游戏里需要完成的操作\r\n        this.workPrompt.active = false; // 关闭提示框\r\n        this.pet.active = false; // 隐藏宠物\r\n        this.petCtrl.goWork() //  宠物状态上锁\r\n        this.workTimeID = this.workPrompt.getChildByName('timeDropDownBox').getComponent('dropdown').selectIndex + 1; // 加1是为了与timeIndex对应起来\r\n        this.workTypeID = this.workPrompt.getChildByName('typeDropDownBox').getComponent('dropdown').selectIndex + 1;\r\n        this.clockCanvas.counter = parseInt(this.timeIndex[this.workTimeID]); // 工作计数器\r\n        var self = this;\r\n        // http post\r\n        let date = new Date();\r\n        let year = date.getFullYear(); //获取当前年份   \r\n        let month = date.getMonth() + 1; //获取当前月份   \r\n        let dat = date.getDate(); //获取当前日    \r\n        let hour = date.getHours(); //获取小时   \r\n        let minute = date.getMinutes(); //获取分钟   \r\n        let second = date.getSeconds(); //获取秒   \r\n        var timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\r\n        var serverAddr = GlobalData.serverAddr + \"php/work_select.php\";\r\n        // 调用自定义网路接口\r\n        var data = {\r\n            \"userID\": GlobalData.userID,\r\n            \"workTimeID\": this.workTimeID,\r\n            \"workTypeID\": this.workTypeID,\r\n        };\r\n        var QANum = 0;  //题目文件编号\r\n        var picNum = 0;  //旅游照片编号\r\n        var hungerChangedValue = 0;\r\n        var cleanessChangedValue = 0;\r\n        var thirstChangedValue = 0;\r\n        var moodChangedValue = 0;\r\n        var energyChangedValue = 0;\r\n        var coinChangedValue = 0;\r\n        var growthChangedValue = 0;\r\n        var flagCAPTCHA = 0;\r\n        var details = '';\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                //无需更新属性值，后台会自动更新，但可以根据这些属性值对用户做出提示\r\n                hungerChangedValue = res.hungerChangedValue;\r\n                cleanessChangedValue = res.cleanessChangedValue;\r\n                thirstChangedValue = res.thirstChangedValue;\r\n                moodChangedValue = res.moodChangedValue;\r\n                energyChangedValue = res.energyChangedValue;\r\n                coinChangedValue = res.coinChangedValue;\r\n                growthChangedValue = res.growthChangedValue;\r\n                flagCAPTCHA = res.flagCAPTCHA; //是否出现验证码题目\r\n                QANum = res.QANum;  //题目文件编号\r\n                picNum = res.picNum;  //打工照片编号              \r\n                //开始更新后台值\r\n                serverAddr = GlobalData.serverAddr + \"php/work_update.php\";\r\n                data = {\r\n                    \"userID\": GlobalData.userID,\r\n                    \"operationTime\": timeStr,\r\n                    \"hungerChangedValue\": hungerChangedValue,\r\n                    \"cleanessChangedValue\": cleanessChangedValue,\r\n                    \"thirstChangedValue\": thirstChangedValue,\r\n                    \"moodChangedValue\": moodChangedValue,\r\n                    \"energyChangedValue\": energyChangedValue,\r\n                    \"coinChangedValue\": coinChangedValue,\r\n                    \"growthChangedValue\": growthChangedValue,\r\n                    \"flagCAPTCHA\": flagCAPTCHA,\r\n                    \"picNum\": picNum,\r\n                    \"workTime\": self.timeIndex[self.workTimeID],\r\n                    \"workTypeID\": self.workTypeID,\r\n                    \"details\": details,\r\n                };\r\n                HttpHelper.httpPost(serverAddr, data, function (res) {\r\n                    //nothing happens,\r\n                });\r\n            }\r\n        });\r\n        // 计数函数\r\n        this.clockCanvas.callback = function () {\r\n            this.counter--;\r\n            if (this.counter < 1) {\r\n                this.unschedule(this.callback);\r\n                this.node.parent.active = false;\r\n                self.pet.active = true;\r\n                self.startCountDown('work', self.workTypeID, QANum, picNum);\r\n                self.petCtrl.workEnd(); // 宠物状态开锁\r\n            }\r\n            this.node.parent.getChildByName('time').getComponent(cc.Label).string = this.counter;\r\n            this.circle(0, 0, 20);\r\n            this.fill();\r\n            this.arc(0, 0, 10, Math.PI / 2, Math.PI / 2 - 2 * this.counter / self.timeIndex[self.workTimeID] * Math.PI, false);\r\n            this.stroke();\r\n        }\r\n        // 计时函数，每一秒执行一次\r\n        this.clockCanvas.node.parent.active = true; //打开工作倒计时\r\n        this.clockCanvas.schedule(this.clockCanvas.callback, 1);\r\n\r\n\r\n    },\r\n\r\n    onClickSleepCloseBtn: function () {\r\n        // 音效尚未添加 -- need audio\r\n        this.isSleepSettingShow = false;\r\n    },\r\n    //  changed by wang-c on 20200103\r\n    onClickSleepBtn: function () {  //点击主界面上的睡觉按钮\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        //var btnSoundID = cc.audioEngine.play(this.btnSound, false, GlobalData.soundVolume);\r\n        console.log(this.petCtrl.flagPetOperBtnEnable);\r\n        if (this.petCtrl.flagPetOperBtnEnable == true) {\r\n            console.log(\"打开睡觉提示框\");\r\n            this.isSleepSettingShow = true;  //显示睡觉设置框\r\n            // 初始化提示框下拉框的值\r\n            let dropdownData = ['30s', '40s', '50s', '60s']; // 四个值，不能与timeIndex数组对应\r\n            this.sleepPrompt.getChildByName('dropDownBox').getComponent('dropdown').init(dropdownData);\r\n        } else {\r\n            let promptStr = \"您的宠物正忙哟~~~\";\r\n            // 失败提示框，待写\r\n        }\r\n\r\n    },\r\n\r\n    //  changed by qll on 20191226\r\n    onClickConfirmSleep: function () {//完成所有设置后，点击“去睡觉”\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n\r\n        // 游戏里需要完成的操作\r\n        this.sleepPrompt.active = false; // 关闭提示框\r\n        this.pet.active = false; // 隐藏宠物\r\n        this.petCtrl.goSleep() // 宠物状态上锁\r\n        this.sleepTimeID = this.sleepPrompt.getChildByName('dropDownBox').getComponent('dropdown').selectIndex + 1; // 加1是为了与timeIndex对应起来\r\n        this.clockCanvas.counter = parseInt(this.timeIndex[this.sleepTimeID]); // 睡觉计数器\r\n        let self = this;\r\n        // http post\r\n        let date = new Date();\r\n        let year = date.getFullYear(); //获取当前年份   \r\n        let month = date.getMonth() + 1; //获取当前月份   \r\n        let dat = date.getDate(); //获取当前日    \r\n        let hour = date.getHours(); //获取小时   \r\n        let minute = date.getMinutes(); //获取分钟   \r\n        let second = date.getSeconds(); //获取秒   \r\n        var timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\r\n        var serverAddr = GlobalData.serverAddr + \"php/sleep_select.php\";\r\n        var energyChangedValue = 0;\r\n        var growthChangedValue = 0;\r\n        var details = '';\r\n        // 调用自定义网路接口\r\n        let data = {\r\n            \"userID\": \"nqEsLYOCtdRUkx4Ovn8bhDUmnBHB3DdEncp0z7ApU1\",\r\n            \"sleepTimeID\": this.sleepTimeID,\r\n        };\r\n        HttpHelper.httpPost(serverAddr, data, function (res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                //无需更新属性值，后台会自动更新，但可以根据这些属性值对用户做出提示\r\n                energyChangedValue = res.energyChangedValue;\r\n                growthChangedValue = res.growthChangedValue;\r\n                //开始更新后台值\r\n                serverAddr = GlobalData.serverAddr + \"php/sleep_update.php\";\r\n                data = {\r\n                    \"userID\": GlobalData.userID,\r\n                    \"operationTime\": timeStr,\r\n                    \"energyChangedValue\": energyChangedValue,\r\n                    \"growthChangedValue\": growthChangedValue,\r\n                    \"sleepTime\": self.timeIndex[self.sleepTimeID],\r\n                    \"details\": details,\r\n                };\r\n                HttpHelper.httpPost(serverAddr, data, function (res) {\r\n                    //nothing happens,\r\n                });\r\n            }\r\n        });\r\n        // 计数函数\r\n        this.clockCanvas.callback = function () {\r\n            this.counter--;\r\n            if (this.counter < 1) {\r\n                this.unschedule(this.callback);\r\n                this.node.parent.active = false;\r\n                self.pet.active = true;\r\n                cc.audioEngine.stop(sleepSoundID);\r\n                self.petCtrl.sleepEnd(); // 宠物状态开锁\r\n            }\r\n            this.node.parent.getChildByName('time').getComponent(cc.Label).string = this.counter;\r\n            this.circle(0, 0, 75);\r\n            this.fill();\r\n            this.arc(0, 0, 60, Math.PI / 2, Math.PI / 2 - 2 * this.counter / self.timeIndex[self.sleepTimeID] * Math.PI, false);\r\n            this.stroke();\r\n        }\r\n        //播放睡觉的声音\r\n        this.sleepSound = cc.url.raw('resources/sound/sleep/6.mp3');\r\n        var soundVolume = 0.5;\r\n        var sleepSoundID = cc.audioEngine.play(this.sleepSound, false, soundVolume);\r\n        //var sleepSoundID = cc.audioEngine.play(this.sleepSound, false, GlobalData.soundVolume);\r\n        // 计时函数，每一秒执行一次\r\n        this.clockCanvas.node.parent.active = true; //打开睡觉倒计时\r\n        this.clockCanvas.schedule(this.clockCanvas.callback, 1);\r\n\r\n\r\n    },\r\n\r\n    onClickHomeBtn: function () {  //跳转到小屋界面\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        this.exit();\r\n        this.petCtrl.exit();\r\n        cc.director.loadScene('house');\r\n    },\r\n\r\n    onClickSettingBtn: function () {  //跳转到设置界面\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        this.exit();\r\n        this.petCtrl.exit();\r\n        cc.director.loadScene('setting');\r\n    },\r\n\r\n    onClickShopBtn: function () {  //跳转到商店界面  P.S.这个按钮应该在两个地方都有出现：主界面and背包框\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        this.exit();\r\n        this.petCtrl.exit();\r\n        cc.director.loadScene('shop');\r\n    },\r\n\r\n    onClickUserInfoBtn: function () {  //跳转到个人信息界面\r\n        //播放按键音\r\n        //this.btnSound = cc.url.raw('resources/sound/button/1.mp3');\r\n        var soundVolume = 0.5;\r\n        var btnSoundID = cc.audioEngine.play(this.btnSound, false, soundVolume);\r\n        this.exit();\r\n        this.petCtrl.exit();\r\n        cc.director.loadScene('personalInfo');\r\n    },\r\n\r\n    // update (dt) {},\r\n});"]}
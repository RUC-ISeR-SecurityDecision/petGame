{"version":3,"sources":["questionPrompt.js"],"names":["cc","Class","extends","Component","properties","type","get","_type","set","value","title","string","picPath","QAPath","console","log","Label","picture","Sprite","info","question","choiceContainer","ToggleContainer","choice1","choice2","choice3","confirmBtn","Button","wrongPrompt","Node","correctPrompt","onLoad","node","on","onClickConfirmBtn","getChildByName","onClickCloseBtn","init","id","self","loader","loadRes","SpriteFrame","err","sp","spriteFrame","JsonAsset","data","json","rsp","JSON","parse","choiceArray","answer","split","getComponentsInChildren","Toggle","i","length","element","isChecked","parent","active","correctAnswer","getComponent","start"],"mappings":"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","file":"questionPrompt.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\main\\js","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        type: {\r\n            get() {\r\n                return this._type;\r\n            },\r\n            set(value) {\r\n                if (value == 0) { // 旅游\r\n                    this.title.string = \"您的宠物旅游回来啦，还带回来了...\";\r\n                    this.picPath = \"tripPic/\";\r\n                    this.QAPath = \"tripQA/\";\r\n                } else if (value == 1) { // 打工\r\n                    this.title.string = \"您的宠物打工回来啦，还带回来了...\";\r\n                    this.picPath = \"workPic/\";\r\n                    this.QAPath = \"workQA/\";\r\n                } else {\r\n                    console.log(\"wrong type error: questionPrompt.js type.set()\");\r\n                }\r\n                this._type = value;\r\n            }\r\n        },\r\n        title: cc.Label,\r\n        picture: cc.Sprite,\r\n        info: cc.Label,\r\n        question: cc.Label,\r\n        choiceContainer: cc.ToggleContainer,\r\n        choice1: cc.Label,\r\n        choice2: cc.Label,\r\n        choice3: cc.Label,\r\n        confirmBtn: cc.Button,\r\n        picPath: null,\r\n        QAPath: null,\r\n        wrongPrompt: cc.Node,\r\n        correctPrompt: cc.Node\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.confirmBtn.node.on('click', this.onClickConfirmBtn, this);\r\n        this.wrongPrompt.getChildByName('closeButton').on('click', this.onClickCloseBtn, this.wrongPrompt);\r\n        this.correctPrompt.getChildByName('closeButton').on('click', this.onClickCloseBtn, this.correctPrompt);\r\n    },\r\n    /**\r\n     * 答题提示框初始化\r\n     * @param {integer} type 0,1 分别代表旅游或者工作\r\n     * @param {integer} id 代表旅游地点或者工作种类\r\n     */\r\n    init: function (type, id) {\r\n        this.type = type;\r\n        this.picPath += '3/1';\r\n        this.QAPath += '3/1/1';\r\n        let self = this;\r\n        cc.loader.loadRes(self.picPath, cc.SpriteFrame, (err, sp) => {\r\n            if (err) {\r\n                console.log(\"failed to load picture\");\r\n            }\r\n            self.picture.spriteFrame = sp;\r\n        });\r\n        cc.loader.loadRes(self.QAPath, cc.JsonAsset, (err, data) => {\r\n            if (err) {\r\n                console.log(err);\r\n            } else {\r\n                console.log(data.json);\r\n                let rsp = JSON.parse(data.json);\r\n                self.question.string = rsp.question;\r\n                let choiceArray = rsp.answer.split('+');\r\n                self.choice1.string = choiceArray[0];\r\n                self.choice2.string = choiceArray[1];\r\n                self.choice3.string = choiceArray[2];\r\n            }\r\n        });\r\n    },\r\n\r\n    onClickConfirmBtn: function () {\r\n        let choiceArray = this.choiceContainer.getComponentsInChildren(cc.Toggle);\r\n        for (let i = 0; i < choiceArray.length; i++) {\r\n            const element = choiceArray[i];\r\n            if (element.isChecked) {\r\n                if (i == 0) { // 判断是否是正确答案，答案选项尚未随机\r\n                    this.title.node.parent.active = false; // 关闭提示框\r\n                    this.correctPrompt.active = true;\r\n                } else {\r\n                    this.title.node.parent.active = false; // 关闭提示框\r\n                    this.wrongPrompt.active = true;\r\n                    let correctAnswer = this.choice1.string;\r\n                    this.wrongPrompt.getChildByName('promptText').getComponent(cc.Label).string += correctAnswer;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    onClickCloseBtn: function () {\r\n        this.active = false;\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}
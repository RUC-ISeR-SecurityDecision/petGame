{"version":3,"sources":["load.js"],"names":["globalData","require","wave","canvasHeight","canvasWidth","waveHeight","waveWidth","xOffset","speed","levelHeight","cc","Class","extends","Component","properties","loadingBar","Graphics","startBtn","Button","init","console","log","drawWave","ctx","startX","clear","time","moveTo","x","y","Math","sin","lineTo","fill","onStartBtnClicked","director","loadScene","onLoad","node","active","start","preloadScene","update"],"mappings":";;;;;;AAAA;AACA,IAAIA,aAAaC,QAAQ,YAAR,CAAjB;AACA;AACA,IAAIC,OAAO;AACPC,kBAAc,GADP,EACa;AACpBC,iBAAa,GAFN,EAEW;AAClBC,gBAAY,EAHL,EAGS;AAChBC,eAAW,IAJJ,EAIS;AAChBC,aAAS,CALF,EAKK;AACZC,WAAO,GANA,EAMK;AACZC,iBAAa,EAPN,CAOS;AAPT,CAAX;;AAUAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAYL,GAAGM,QADP;AAERC,kBAAUP,GAAGQ;AAFL,KAHP;;AAQLC,UAAM,gBAAU;AACZC,gBAAQC,GAAR,CAAY,MAAZ,EAAoBrB,UAApB;AACAA,mBAAWmB,IAAX;AACA;AACH,KAZI;;AAcLG,cAAU,oBAAW;AACjB,YAAIC,MAAM,KAAKR,UAAf;AACA,YAAMS,SAAS,CAAf;AACAD,YAAIE,KAAJ;;AAEA,aAAKC,IAAL,IAAa,CAAb;AACAxB,aAAKK,OAAL,IAAgBL,KAAKM,KAArB;AACAN,aAAKO,WAAL,IAAoB,GAApB;AACAc,YAAII,MAAJ,CAAW,CAAX,EAAc,CAAd;AACA,aAAK,IAAIC,IAAIJ,MAAb,EAAqBI,IAAIJ,SAAStB,KAAKE,WAAvC,EAAoDwB,KAAK,KAAK1B,KAAKE,WAAnE,EAAgF;AAC5E,gBAAMyB,IAAI3B,KAAKG,UAAL,GAAkByB,KAAKC,GAAL,CAAS,CAACP,SAASI,CAAV,IAAe1B,KAAKI,SAApB,GAAgCJ,KAAKK,OAA9C,CAAlB,GAA2EL,KAAKO,WAA1F;AACAc,gBAAIS,MAAJ,CAAWJ,CAAX,EAAcC,CAAd;AACH;AACDN,YAAIS,MAAJ,CAAW9B,KAAKE,WAAhB,EAA6B,CAA7B;AACAmB,YAAIS,MAAJ,CAAWR,MAAX,EAAmB,CAAnB;AACAD,YAAIU,IAAJ;AACH,KA9BI;;AAgCLC,uBAAmB,6BAAW;AAC1Bd,gBAAQC,GAAR,CAAY,oBAAZ;AACAX,WAAGyB,QAAH,CAAYC,SAAZ,CAAsB,aAAtB;AACH,KAnCI;AAoCL;;AAEAC,UAtCK,oBAsCK;AACN,aAAKlB,IAAL;AACA,aAAKO,IAAL,GAAY,CAAZ;AACA,aAAKT,QAAL,CAAcqB,IAAd,CAAmBC,MAAnB,GAA4B,KAA5B;AACH,KA1CI;AA4CLC,SA5CK,mBA4CI;AACL9B,WAAGyB,QAAH,CAAYM,YAAZ,CAAyB,aAAzB,EAAwC,YAAY;AAChD/B,eAAGW,GAAH,CAAO,sBAAP;AACH,SAFD;AAGH,KAhDI;AAkDLqB,UAlDK,oBAkDK;AACN,YAAIxC,KAAKO,WAAL,GAAmB,GAAvB,EAA4B;AACxB,iBAAKa,QAAL;AACH,SAFD,MAGK;AACD,iBAAKL,QAAL,CAAcqB,IAAd,CAAmBC,MAAnB,GAA4B,IAA5B;AACH;AACJ;AAzDI,CAAT","file":"load.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\load\\JS","sourcesContent":["// 加载数据\nvar globalData = require(\"globalData\");\n// 加载框水波对象\nvar wave = {\n    canvasHeight: 200,  // 画面高度\n    canvasWidth: 300, // 画面宽度\n    waveHeight: 10, // 水波高度\n    waveWidth: 0.02,// 水波宽度\n    xOffset: 0, // 波浪的横坐标偏移\n    speed: 0.1, // 波浪速度\n    levelHeight: 10 // 水平线\n}\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        loadingBar: cc.Graphics,\n        startBtn: cc.Button\n    },\n\n    init: function(){\n        console.log(\"init\", globalData);\n        globalData.init();\n        // console.log(globalData.species);\n    },\n\n    drawWave: function() {\n        var ctx = this.loadingBar;\n        const startX = 0;\n        ctx.clear();\n\n        this.time += 1;\n        wave.xOffset += wave.speed;\n        wave.levelHeight += 0.2;\n        ctx.moveTo(0, 0);\n        for (let x = startX; x < startX + wave.canvasWidth; x += 20 / wave.canvasWidth) {\n            const y = wave.waveHeight * Math.sin((startX + x) * wave.waveWidth + wave.xOffset) + wave.levelHeight;\n            ctx.lineTo(x, y);\n        }\n        ctx.lineTo(wave.canvasWidth, 0);\n        ctx.lineTo(startX, 0);\n        ctx.fill();\n    },\n\n    onStartBtnClicked: function() {\n        console.log('turn to adopt page');\n        cc.director.loadScene(\"portrayPage\");\n    },\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.init();\n        this.time = 0;\n        this.startBtn.node.active = false;\n    },\n\n    start () {\n        cc.director.preloadScene(\"portrayPage\", function () {\n            cc.log(\"Next scene preloaded\");\n        });\n    },\n\n    update () {\n        if (wave.levelHeight < 150) {\n            this.drawWave();\n        }\n        else {\n            this.startBtn.node.active = true;\n        }\n    },\n});\n"]}
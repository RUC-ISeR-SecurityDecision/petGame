{"version":3,"sources":["petPortray.js"],"names":["GlobalData","require","cc","Class","extends","Component","properties","speciesBtn","Button","skinBtn","genderBtn","nameBtn","portray","PageView","title","Label","curPage","speciesPage","ScrollView","genderPage","ToggleContainer","skinPage","namePage","Sprite","_isNamePageShow","boyPetImage","girlPetImage","petColor1Image","petColor2Image","petColor3Image","onSpeciesBtnClicked","console","log","setCurrentPageIndex","scrollToPage","changeTitle","onGenderBtnClicked","onSkinBtnClicked","onNameBtnClicked","showNamePage","value","string","RangeError","pageNode","content","children","color","node","changeImage","choiceType","boyPetImagePath","girlPetImagePath","petColor1ImagePath","gender","petColor2ImagePath","petColor3ImagePath","self","species","loader","loadRes","SpriteFrame","err","sp","spriteFrame","onScrollingEvent","i","items","length","element","worldPos","parent","convertToWorldSpaceAR","position","viewPos","convertToNodeSpaceAR","y","height","name","scale","onGenderToggleEvent","toggleArry","getComponentsInChildren","Toggle","isChecked","onSkinToggleEvent","onInputEvent","text","editbox","customEventData","petName","masterName","onCompleteClicked","serverAddr","data","userID","userTitle","HttpHelper","httpPost","director","loadScene","action","moveBy","v2","runAction","onLoad","start"],"mappings":"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","file":"petPortray.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\adopt\\petPortray\\JS","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nvar GlobalData = require('globalData');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        speciesBtn: cc.Button, // 切换至物种选择页面\r\n        skinBtn: cc.Button, // 切换至毛色选择页面\r\n        genderBtn: cc.Button, // 切换至性别选择页面\r\n        nameBtn: cc.Button, // 切换至命名页面\r\n\r\n        portray: cc.PageView, // 整个页面\r\n        title: cc.Label, // 可改变页面标题\r\n        curPage: 0, \r\n\r\n        speciesPage: cc.ScrollView, // 物种选择页面\r\n        genderPage: cc.ToggleContainer, // 性别选择页面\r\n        skinPage: cc.ToggleContainer, // 毛色选择页面\r\n        namePage: cc.Sprite, // 命名页面\r\n        _isNamePageShow: false, // 是否显示命名页面\r\n\r\n        boyPetImage: cc.Sprite, // 性别选择页面男宠物形象\r\n        girlPetImage: cc.Sprite, // 性别选择页面女宠物形象\r\n\r\n        petColor1Image: cc.Sprite, // 毛色选择页面的选项1图片 \r\n        petColor2Image: cc.Sprite, // 毛色选择页面的选项2图片\r\n        petColor3Image: cc.Sprite, // 毛色选择页面的选项3图片\r\n        \r\n    },\r\n\r\n    // 监听button点击事件\r\n    onSpeciesBtnClicked: function() {\r\n        console.log('change to species view');\r\n        this.portray.setCurrentPageIndex(0);\r\n        this.portray.scrollToPage(0);\r\n        this.changeTitle(0);\r\n    },\r\n\r\n    onGenderBtnClicked: function() {\r\n        console.log('change to gender view');\r\n        this.portray.setCurrentPageIndex(1);\r\n        this.portray.scrollToPage(1);\r\n        this.changeTitle(1);\r\n    },\r\n\r\n    onSkinBtnClicked: function() {\r\n        console.log('change to skin view');\r\n        this.portray.setCurrentPageIndex(2);\r\n        this.portray.scrollToPage(2);\r\n        this.changeTitle(2);\r\n    },\r\n\r\n    onNameBtnClicked: function() {\r\n        console.log('change to name view');\r\n        this.showNamePage();\r\n    },\r\n\r\n    // 改变标题颜色及内容\r\n    changeTitle: function(value){\r\n        if (value == 0) {\r\n            this.title.string = \"宠物种类\";\r\n        } else if (value == 1) {\r\n            this.title.string = \"宠物性别\";\r\n        } else if (value == 2) {\r\n            this.title.string = \"宠物毛色\";\r\n        } else {\r\n            console.log(\"petPortray/function:changeTile wrong parameter\");\r\n            return RangeError\r\n        }\r\n        let pageNode = this.portray.content.children;\r\n        console.log(pageNode[value].color);\r\n        this.title.node.color = pageNode[value].color;\r\n    },\r\n    /**\r\n     * 用户做出物种和性别选择时需要更新性别页面和毛色页面的形象\r\n     * @param choiceType 玩家在领养界面做出的选择类型\r\n     */\r\n    changeImage: function(choiceType) {\r\n        if (!choiceType) {\r\n            console.log(\"petPortray.js error: changeImage() has incorrect param!\");\r\n            return RangeError;\r\n        } \r\n        let boyPetImagePath = \"pet/male_\" ;\r\n        let girlPetImagePath = \"pet/female_\" ;\r\n        let petColor1ImagePath = GlobalData.gender == 0 ? \"pet/male_\" : \"pet/female_\"; \r\n        let petColor2ImagePath = GlobalData.gender == 0 ? \"pet/male_\" : \"pet/female_\";\r\n        let petColor3ImagePath = GlobalData.gender == 0 ? \"pet/male_\" : \"pet/female_\";\r\n        let self = this;\r\n        if (GlobalData.species == 0) {\r\n            boyPetImagePath += 'owl';\r\n            girlPetImagePath += 'owl';\r\n            petColor1ImagePath += 'owl'; \r\n            petColor2ImagePath += 'owl';\r\n            petColor3ImagePath += 'owl';\r\n        } else if (GlobalData.species == 1) {\r\n            boyPetImagePath += 'penguins';\r\n            girlPetImagePath += 'penguins';\r\n            petColor1ImagePath += 'penguins'; \r\n            petColor2ImagePath += 'penguins';\r\n            petColor3ImagePath += 'penguins';\r\n        } else if (GlobalData.species == 2) {\r\n            boyPetImagePath += 'cat';\r\n            girlPetImagePath += 'cat';\r\n            petColor1ImagePath += 'cat'; \r\n            petColor2ImagePath += 'cat';\r\n            petColor3ImagePath += 'cat';\r\n        } else if (GlobalData.species == 3) {\r\n            boyPetImagePath += 'dog';\r\n            girlPetImagePath += 'dog';\r\n            petColor1ImagePath += 'dog'; \r\n            petColor2ImagePath += 'dog';\r\n            petColor3ImagePath += 'dog';\r\n        }\r\n        boyPetImagePath += (GlobalData.color + 1) + '';\r\n        girlPetImagePath += (GlobalData.color + 1) + '';\r\n        petColor1ImagePath += 1; \r\n        petColor2ImagePath += 2;\r\n        petColor3ImagePath += 3; \r\n        if (choiceType == 'species') {\r\n            cc.loader.loadRes(boyPetImagePath, cc.SpriteFrame, (err, sp) => {\r\n                console.log(err);\r\n                if (err) return;\r\n                if (this.node) {\r\n                    console.log(\"success\");\r\n                    if(self.boyPetImage){\r\n                        self.boyPetImage.spriteFrame = sp;\r\n                    }\r\n                }\r\n            })\r\n            cc.loader.loadRes(girlPetImagePath, cc.SpriteFrame, (err, sp) => {\r\n                console.log(err);\r\n                if (err) return;\r\n                if (this.node) {\r\n                    console.log(\"success\");\r\n                    if(self.girlPetImage){\r\n                        self.girlPetImage.spriteFrame = sp;\r\n                    }\r\n                }\r\n            })\r\n            cc.loader.loadRes(petColor1ImagePath, cc.SpriteFrame, (err, sp) => {\r\n                console.log(err);\r\n                if (err) return;\r\n                if (this.node) {\r\n                    console.log(\"success\");\r\n                    if(self.petColor1Image){\r\n                        self.petColor1Image.spriteFrame = sp;\r\n                    }\r\n                }\r\n            })\r\n            cc.loader.loadRes(petColor2ImagePath, cc.SpriteFrame, (err, sp) => {\r\n                console.log(err);\r\n                if (err) return;\r\n                if (this.node) {\r\n                    console.log(\"success\");\r\n                    if(self.petColor2Image){\r\n                        self.petColor2Image.spriteFrame = sp;\r\n                    }\r\n                }\r\n            })\r\n            cc.loader.loadRes(petColor3ImagePath, cc.SpriteFrame, (err, sp) => {\r\n                console.log(err);\r\n                if (err) return;\r\n                if (this.node) {\r\n                    console.log(\"success\");\r\n                    if(self.petColor3Image){\r\n                        self.petColor3Image.spriteFrame = sp;\r\n                    }\r\n                }\r\n            })\r\n        } else if (choiceType == 'gender') {\r\n            cc.loader.loadRes(petColor1ImagePath, cc.SpriteFrame, (err, sp) => {\r\n                console.log(err);\r\n                if (err) return;\r\n                if (this.node) {\r\n                    console.log(\"success\");\r\n                    if(self.petColor1Image){\r\n                        self.petColor1Image.spriteFrame = sp;\r\n                    }\r\n                }\r\n            })\r\n            cc.loader.loadRes(petColor2ImagePath, cc.SpriteFrame, (err, sp) => {\r\n                console.log(err);\r\n                if (err) return;\r\n                if (this.node) {\r\n                    console.log(\"success\");\r\n                    if(self.petColor2Image){\r\n                        self.petColor2Image.spriteFrame = sp;\r\n                    }\r\n                }\r\n            })\r\n            cc.loader.loadRes(petColor3ImagePath, cc.SpriteFrame, (err, sp) => {\r\n                console.log(err);\r\n                if (err) return;\r\n                if (this.node) {\r\n                    console.log(\"success\");\r\n                    if(self.petColor3Image){\r\n                        self.petColor3Image.spriteFrame = sp;\r\n                    }\r\n                }\r\n            })\r\n        } else if (choiceType == 'skin') {\r\n            cc.loader.loadRes(boyPetImagePath, cc.SpriteFrame, (err, sp) => {\r\n                console.log(err);\r\n                if (err) return;\r\n                if (this.node) {\r\n                    console.log(\"success\");\r\n                    if(self.boyPetImage){\r\n                        self.boyPetImage.spriteFrame = sp;\r\n                    }\r\n                }\r\n            })\r\n            cc.loader.loadRes(girlPetImagePath, cc.SpriteFrame, (err, sp) => {\r\n                console.log(err);\r\n                if (err) return;\r\n                if (this.node) {\r\n                    console.log(\"success\");\r\n                    if(self.girlPetImage){\r\n                        self.girlPetImage.spriteFrame = sp;\r\n                    }\r\n                }\r\n            })\r\n        }        \r\n    },\r\n    // 监听物种选择页面的滚动事件，判断用户物种选择\r\n    onScrollingEvent: function(){\r\n        // console.log(this.speciesPage.getScrollOffset(), this.items[this.species]);\r\n        for (let i = 0; i < this.items.length; i++) {\r\n            const element = this.items[i];\r\n            let worldPos = element.parent.convertToWorldSpaceAR(element.position);\r\n            let viewPos = this.content.parent.convertToNodeSpaceAR(worldPos);\r\n            // console.log(element.name, this.content.getParent().name)\r\n            // console.log(worldPos, viewPos, this.speciesPage.node.convertToWorldSpaceAR(this.content.getParent().position));\r\n            \r\n            if (viewPos.y < element.height/2 && viewPos.y >= -element.height/2) {\r\n                // scroll滑动到相应的宠物种类时，进行处理\r\n                if (GlobalData.species != i) {\r\n                    // 判断滑动是否使种类发生改变，发生改变进行以下处理\r\n                    console.log(\"choose \" + element.name)\r\n                    this.items[GlobalData.species].scale = 0.8;\r\n                    GlobalData.species = i;\r\n                    this.items[GlobalData.species].scale = 1.25; \r\n                    this.changeImage('species');\r\n                }     \r\n            } \r\n              \r\n        }\r\n        // console.log(this.content.height,this.speciesPage.getContentPosition());\r\n    },\r\n    // 监听性别选择页面的复选框事件\r\n    onGenderToggleEvent: function() {\r\n        let toggleArry = this.genderPage.getComponentsInChildren(cc.Toggle);\r\n        for (let i = 0; i < toggleArry.length; i++) {\r\n            const element = toggleArry[i];\r\n            if (element.isChecked) {\r\n                GlobalData.gender = i;\r\n                if (GlobalData.gender == 0) {\r\n                    console.log(\"user choose boy pet\");\r\n                } else {\r\n                    console.log(\"user choose girl pet\");\r\n                }\r\n            }\r\n        }\r\n        this.changeImage('gender');\r\n    },\r\n    // 监听毛色选择页面的复选框事件\r\n    onSkinToggleEvent : function() {\r\n        let toggleArry = this.skinPage.getComponentsInChildren(cc.Toggle);\r\n        for (let i = 0; i < toggleArry.length; i++) {\r\n            const element = toggleArry[i];\r\n            if (element.isChecked) {\r\n                GlobalData.color = i;\r\n                console.log(\"user choose color\" + (i + 1) )\r\n            }\r\n        }\r\n        this.changeImage('skin');\r\n    },\r\n    // 监听输入事件\r\n    // textChanged 事件的回调函数的参数模型\r\n    // onTextChanged: function(text, editbox, customEventData) {\r\n    //     // 这里的 text 表示 修改完后的 EditBox 的文本内容\r\n    //     // 这里 editbox 是一个 cc.EditBox 对象\r\n    //     // 这里的 customEventData 参数就等于你之前设置的 \"foobar\"\r\n    // }\r\n    onInputEvent: function(text, editbox, customEventData){\r\n        console.log(editbox);\r\n        if (editbox.node.name == 'petNameInput') {\r\n            GlobalData.name = text;\r\n            console.log(\"user set pet name\", GlobalData.petName);\r\n        } else if(editbox.node.name == 'masterNameInput'){\r\n            GlobalData.title = text;\r\n            console.log(\"user set master name\", GlobalData.masterName);\r\n        }\r\n    },\r\n\r\n    onCompleteClicked: function() {  //命名完成，提交结果，跳转到主界面\r\n        console.log('turn to main page');\r\n        // 调用自定义网路接口\r\n        var serverAddr = GlobalData.serverAddr + \"php/adopt.php\";\r\n\t\tvar data = {\r\n\t\t\tuserID: GlobalData.userID,\r\n            species: GlobalData.species,\r\n            gender: GlobalData.gender,\r\n            color: GlobalData.color,\r\n            userTitle: GlobalData.title,\r\n            petName: GlobalData.name,\r\n\t\t};\r\n\t\tHttpHelper.httpPost(serverAddr, data, function(data) {\r\n\t\t\tif (data == -1) {\r\n\t\t\t\tconsole.log(\"访问失败\");\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('领养成功');\r\n\t\t\t}\r\n        });\r\n        serverAddr = GlobalData.serverAddr + \"php/autoUpdate.php\";\r\n        data = {\r\n\t\t\tuserID: GlobalData.userID,\r\n\t\t};\r\n        HttpHelper.httpPost(serverAddr, data, function(data) {\r\n\t\t\tif (data == -1) {\r\n\t\t\t\tconsole.log(\"访问失败\");\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('后台自动更新进程开始运行');\r\n\t\t\t}\r\n        });\r\n        cc.director.loadScene(\"mainPage\");\r\n    },\r\n\r\n    // 显示命名页面\r\n    showNamePage: function() {\r\n        this._isNamePageShow = !this._isNamePageShow;\r\n        let action = null;\r\n        if (this._isNamePageShow) {\r\n            action = cc.moveBy(0.5, cc.v2(0, -800));\r\n        } else {\r\n            action = cc.moveBy(0.5, cc.v2(0, 800));\r\n        }\r\n        // console.log(this.namePage.node);\r\n        this.namePage.node.runAction(action);\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.content = this.speciesPage.content;\r\n        this.items = this.content.children;// content的四个子节点，四个宠物选项node\r\n\r\n        // ------- 初始化宠物选项 -------       \r\n        // 宠物种类\r\n        this.changeImage('species');\r\n        this.items[GlobalData.species].scale = 1.25;\r\n        this.changeTitle(0);\r\n\r\n        this._isNamePageShow = false;\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n\r\n\r\n    // update (dt) {},\r\n});\r\n"]}
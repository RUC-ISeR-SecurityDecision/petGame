{"version":3,"sources":["autoRun.js"],"names":["cc","Class","extends","Component","properties","querySetIntervalID","genRandomRewardSetIntervalID","genUpgradeReward","newGrowthLevel","date","Date","year","getFullYear","month","getMonth","dat","getDate","hour","getHours","minute","getMinutes","second","getSeconds","timeStr","serverAddr","GlobalData","rewardLevel","data","HttpHelper","httpPost","res","console","log","upgradeRewardCoin","rewardCoin","upgradeRewardItemID","rewardItemID","upgradeRewardItemCateID","rewardItemCateID","flagUpgradeReward","queryAttribute","instance","coin","title","lastLoginTime","contLoginDays","species","name","gender","color","hunger","hungerCeiling","cleaness","cleanessCeiling","thirst","thirstCeiling","mood","moodCeiling","energy","energyCeiling","growth","growthLevel","flagAgeGroup","flagSkipping","flagStory","flagSleep","sleepRemainTime","flagWork","workRemainTime","flagTrip","tripRemainTime","flagBgMusic","bgMusicVolume","bgMusicNum","bgPicNum","flagSound","soundVolume","flagNotice","flagLocation","flagVibration","bag","itemIDArrayStr","itemIDArray","itemNameArrayStr","itemNameArray","categoryIDArrayStr","categoryIDArray","categoryNameArrayStr","categoryNameArray","numberArrayStr","numberArray","categoryArray","flagEnableArrayStr","flagEnableArray","genRandomReward","luckyNum","number","Math","floor","random","ceil","randomRewardItemID","randomRewardItemCateID","flagRandomReward","start","queryInterval","genRandomRewardInterval","setInterval","exit","clearInterval"],"mappings":"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","file":"autoRun.js","sourceRoot":"..\\..\\..\\..\\assets\\runtime","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        querySetIntervalID: 0,\r\n        genRandomRewardSetIntervalID: 0,\r\n    },\r\n\r\n    genUpgradeReward: function(newGrowthLevel){\r\n        let date = new Date();\r\n        let year = date.getFullYear(); //获取当前年份   \r\n        let month = date.getMonth() + 1; //获取当前月份   \r\n        let dat = date.getDate(); //获取当前日    \r\n        let hour = date.getHours(); //获取小时   \r\n        let minute = date.getMinutes(); //获取分钟   \r\n        let second = date.getSeconds(); //获取秒   \r\n        let timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\r\n        var serverAddr = GlobalData.serverAddr + \"php/genReward.php\";\r\n        var rewardLevel = newGrowthLevel;\r\n        // 调用自定义网路接口生成升级奖励\r\n        var data = {\r\n            \"userID\": \"nqEsLYOCtdRUkx4Ovn8bhDUmnBHB3DdEncp0z7ApU1\",\r\n            \"genTime\": timeStr,\r\n            \"rewardCategoryID\": 3,\r\n            \"rewardLevel\": rewardLevel,\r\n        };\r\n        HttpHelper.httpPost(serverAddr, data, function(res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                GlobalData.upgradeRewardCoin = res.rewardCoin;//奖励金币数\r\n                GlobalData.upgradeRewardItemID = res.rewardItemID;//奖励物品编号\r\n                GlobalData.upgradeRewardItemCateID = res.rewardItemCateID;//奖励物品类别编号\r\n                GlobalData.flagUpgradeReward = true;\r\n            }\r\n        }); \r\n    },\r\n\r\n    queryAttribute: function (){\r\n        var instance = this;\r\n        var serverAddr = GlobalData.serverAddr + \"php/queryUserAttribute.php\";\r\n        // 调用自定义网路接口进行查询\r\n        var data = {\r\n            \"userID\": \"nqEsLYOCtdRUkx4Ovn8bhDUmnBHB3DdEncp0z7ApU1\"\r\n        };\r\n        HttpHelper.httpPost(serverAddr, data, function(res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                GlobalData.coin = res.coin;//金币值\r\n                GlobalData.title = res.title;//主人称呼\r\n            }\r\n        });\r\n        serverAddr = GlobalData.serverAddr + \"php/queryPetAttribute.php\";\r\n        HttpHelper.httpPost(serverAddr, data, function(res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                GlobalData.lastLoginTime = res.lastLoginTime;//上一次登录时间\r\n                GlobalData.contLoginDays = res.contLoginDays; //连续登录天数\r\n                GlobalData.species = res.species;// 宠物种类\r\n                GlobalData.name = res.name;// 宠物名字\r\n                GlobalData.gender = res.gender;//  宠物性别\r\n                GlobalData.color = res.color;// 宠物毛色\r\n                GlobalData.hunger = res.hunger;// 宠物饥饿值\r\n                GlobalData.hungerCeiling = res.hungerCeiling;// 宠物饥饿值上限\r\n                GlobalData.cleaness = res.cleaness;// 宠物清洁值\r\n                GlobalData.cleanessCeiling = res.cleanessCeiling;// 宠物清洁值上限\r\n                GlobalData.thirst = res.thirst;// 宠物口渴值\r\n                GlobalData.thirstCeiling = res.thirstCeiling;// 宠物口渴值上限\r\n                GlobalData.mood = res.mood;// 宠物心情值\r\n                GlobalData.moodCeiling = res.moodCeiling;// 宠物心情值上限\r\n                GlobalData.energy = res.energy;// 宠物能量值\r\n                GlobalData.energyCeiling = res.energyCeiling;// 宠物能量值上限\r\n                GlobalData.growth = res.growth;// 宠物成长值\r\n                GlobalData.growthLevel = res.growthLevel;// 宠物成长等级\r\n                GlobalData.flagAgeGroup = res.flagAgeGroup;// 标志位：幼年or成年\r\n                GlobalData.flagSkipping = res.flagSkipping;//标志位_是否解锁“跳绳”操作\r\n                GlobalData.flagStory = res.flagStory;//标志位_是否解锁“讲故事”操作\r\n                GlobalData.flagSleep = res.flagSleep;//标志位-是否正在睡觉\r\n                GlobalData.sleepRemainTime = res.sleepRemainTime;//睡觉剩余时长\r\n                GlobalData.flagWork = res.flagWork;//标志位-是否正在打工\r\n                GlobalData.workRemainTime = res.workRemainTime;//打工剩余时长\r\n                GlobalData.flagTrip = res.flagTrip;//标志位-是否正在旅游\r\n                GlobalData.tripRemainTime = res.tripRemainTime;//旅游剩余时长\r\n            }\r\n        });\r\n        serverAddr = GlobalData.serverAddr + \"php/querySetting.php\";\r\n        HttpHelper.httpPost(serverAddr, data, function(res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                GlobalData.flagBgMusic = res.flagBgMusic;//标志位_是否开启背景音乐\r\n                GlobalData.bgMusicVolume = res.bgMusicVolume;//背景音乐音量\r\n                GlobalData.bgMusicNum = res.bgMusicNum;//背景音乐曲目编号\r\n                GlobalData.bgPicNum = res.bgPicNum;//背景图片编号\r\n                GlobalData.flagSound = res.flagSound;//标志位_是否开启音效\r\n                GlobalData.soundVolume = res.soundVolume;//音效音量\r\n                GlobalData.flagNotice = res.flagNotice;//标志位_是否开启推送通知\r\n                GlobalData.flagLocation = res.flagLocation;//标志位_是否开启摄像头权限\r\n                GlobalData.flagVibration = res.flagVibration;//标志位_是否开启震动\r\n            }\r\n        });\r\n        serverAddr = GlobalData.serverAddr + \"php/queryBag.php\";\r\n        HttpHelper.httpPost(serverAddr, data, function(res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                GlobalData.bag.itemIDArrayStr = res.itemIDArray;//物品ID数组\r\n                GlobalData.bag.itemNameArrayStr = res.itemNameArray;//物品名称数组（英文）\r\n                GlobalData.bag.categoryIDArrayStr = res.categoryIDArray;//物品类别ID数组\r\n                GlobalData.bag.categoryNameArrayStr = res.categoryNameArray;//物品类别名称数组\r\n                GlobalData.bag.numberArrayStr = res.numberArray;//物品数量数组\r\n            }\r\n        });\r\n        serverAddr = GlobalData.serverAddr + \"php/queryDecBag.php\";\r\n        HttpHelper.httpPost(serverAddr, data, function(res) {\r\n            if (res != -1) {\r\n                console.log(res);\r\n                GlobalData.bag.itemIDArrayStr = res.itemIDArray;//物品ID数组\r\n                GlobalData.bag.itemNameArrayStr = res.itemNameArray;//物品名称数组（英文）\r\n                GlobalData.bag.categoryIDArrayStr = res.categoryArray;//物品类别ID数组\r\n                GlobalData.bag.categoryNameArrayStr = res.categoryNameArray;//物品类别名称数组\r\n                GlobalData.bag.flagEnableArrayStr = res.flagEnableArray;//物品是否启用的标志位数组\r\n            }\r\n        });\r\n    },\r\n\r\n    genRandomReward: function(){\r\n        var luckyNum = 7;  \r\n        var number = Math.floor(Math.random() * 10);\r\n        //以十分之一的概率生成奖励\r\n        if (number == luckyNum){\r\n            let date = new Date();\r\n            let year = date.getFullYear(); //获取当前年份   \r\n            let month = date.getMonth() + 1; //获取当前月份   \r\n            let dat = date.getDate(); //获取当前日    \r\n            let hour = date.getHours(); //获取小时   \r\n            let minute = date.getMinutes(); //获取分钟   \r\n            let second = date.getSeconds(); //获取秒   \r\n            let timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\r\n            var serverAddr = GlobalData.serverAddr + \"php/genReward.php\";\r\n            var rewardLevel = Math.ceil(Math.random() * 20);\r\n            // 调用自定义网路接口生成随机奖励\r\n            var data = {\r\n                \"userID\": \"nqEsLYOCtdRUkx4Ovn8bhDUmnBHB3DdEncp0z7ApU1\",\r\n                \"genTime\": timeStr,\r\n                \"rewardCategoryID\": 4,\r\n                \"rewardLevel\": rewardLevel,\r\n            };\r\n            HttpHelper.httpPost(serverAddr, data, function(res) {\r\n                if (res != -1) {\r\n                    console.log(res);\r\n                    GlobalData.randomRewardItemID = res.rewardItemID;//奖励物品编号\r\n                    GlobalData.randomRewardItemCateID = res.rewardItemCateID;//奖励物品类别编号\r\n                    GlobalData.flagRandomReward = true;\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n        var queryInterval = 1000;  //时间间隔为1s，每1秒刷新一次属性值\r\n        var genRandomRewardInterval = 180000;  //时间间隔为3分钟，每3分钟生成一次随机奖励\r\n        this.querySetIntervalID = setInterval(queryAttribute, queryInterval);\r\n        this.genRandomRewardSetIntervalID = setInterval(genRandomReward, genRandomRewardInterval);\r\n    },\r\n\r\n    exit (){\r\n        clearInterval(this.querySetIntervalID);\r\n        clearInterval(this.genRandomRewardSetIntervalID);\r\n    },\r\n\r\n    \r\n\r\n    // update (dt) {},\r\n});\r\n"]}